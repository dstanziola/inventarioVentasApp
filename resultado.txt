============================= test session starts =============================
platform win32 -- Python 3.12.6, pytest-8.4.1, pluggy-1.6.0 -- D:\inventario_app2\venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: D:\inventario_app2
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.0.0, cov-6.2.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 631 items

tests/api/test_product_schemas_service_validation.py::TestProductServiceStockValidation::test_product_create_service_auto_correction PASSED [  0%]
tests/api/test_product_schemas_service_validation.py::TestProductServiceStockValidation::test_product_create_strict_service_with_stock_should_fail FAILED [  0%]
tests/api/test_product_schemas_service_validation.py::TestProductServiceStockValidation::test_product_create_service_with_zero_stock_should_pass PASSED [  0%]
tests/api/test_product_schemas_service_validation.py::TestProductServiceStockValidation::test_product_create_material_with_stock_should_pass PASSED [  0%]
tests/api/test_product_schemas_service_validation.py::TestProductServiceStockValidation::test_product_update_service_stock_should_fail PASSED [  0%]
tests/api/test_product_schemas_service_validation.py::TestProductServiceStockValidation::test_product_update_material_stock_should_pass PASSED [  0%]
tests/api/test_product_schemas_service_validation.py::TestProductServiceStockValidation::test_product_response_service_consistency_warning FAILED [  1%]
tests/api/test_product_schemas_service_validation.py::TestProductSchemasCategoryIntegration::test_product_create_without_category_type PASSED [  1%]
tests/api/test_product_schemas_service_validation.py::TestProductSchemasCategoryIntegration::test_product_create_with_validation_requires_category_type PASSED [  1%]
tests/api/test_product_schemas_service_validation.py::TestProductSchemaExamples::test_material_example_from_schema PASSED [  1%]
tests/api/test_product_schemas_service_validation.py::TestProductSchemaExamples::test_service_example_auto_corrected PASSED [  1%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_authenticate_compatibility_maintained FAILED [  1%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_authenticate_with_invalid_credentials PASSED [  2%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_backward_compatibility_complete PASSED [  2%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_enhanced_password_validation FAILED [  2%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_error_handling_improved FAILED [  2%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_fase3_pattern_implementation FAILED [  2%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_get_user_by_id_optimized FAILED [  2%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_get_user_statistics_new_method PASSED [  3%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_get_users_by_role_new_method FAILED [  3%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_logging_implementation PASSED [  3%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_performance_optimization PASSED [  3%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_security_validations_robust FAILED [  3%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_update_user_password_security PASSED [  3%]
tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_validation_helper_integration PASSED [  3%]
tests/optimization/test_user_service_optimization.py::TestUserServiceSecurityEnhancements::test_authentication_logging FAILED [  4%]
tests/optimization/test_user_service_optimization.py::TestUserServiceSecurityEnhancements::test_password_strength_validation PASSED [  4%]
tests/optimization/test_user_service_optimization.py::TestUserServiceSecurityEnhancements::test_user_enumeration_protection PASSED [  4%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_audit_trail_for_operations FAILED [  4%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_backward_compatibility_maintained FAILED [  4%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_cache_management_with_logging FAILED [  4%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_create_product_label_with_logging FAILED [  5%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_error_handling_with_structured_logging FAILED [  5%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_format_barcode_uses_validation_helper FAILED [  5%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_generate_barcode_image_with_validation FAILED [  5%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_initialization_logging FAILED [  5%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_performance_improvements FAILED [  5%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_search_product_by_code_performance_logging FAILED [  6%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_service_has_fase3_components FAILED [  6%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_templates_functionality_preserved FAILED [  6%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_validate_barcode_uses_validation_helper FAILED [  6%]
tests/services/test_label_service_fase3_optimization.py::TestLabelServiceIntegrationFASE3::test_full_workflow_with_fase3_components FAILED [  6%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_auxiliary_methods_return_reportlab_compatible_elements FAILED [  6%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_inventory_table_calculations FAILED [  6%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_inventory_table_empty_data FAILED [  7%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_inventory_table_with_zero_stock FAILED [  7%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_movements_table_data_integrity FAILED [  7%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_movements_table_empty_data FAILED [  7%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_movements_table_structure FAILED [  7%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_profitability_metrics_calculations FAILED [  7%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_profitability_metrics_comprehensive FAILED [  8%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_sales_summary_comprehensive FAILED [  8%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_sales_summary_tax_breakdown FAILED [  8%]
tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_table_styling_consistency FAILED [  8%]
tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_database_helper_complex_queries FAILED [  8%]
tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_error_handling_with_logging FAILED [  8%]
tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_inventory_report_generation FAILED [  9%]
tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_movements_report_generation FAILED [  9%]
tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_parameter_validation_with_validation_helper FAILED [  9%]
tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_pdf_output_format_validation FAILED [  9%]
tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_performance_logging FAILED [  9%]
tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_profitability_report_generation FAILED [  9%]
tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_report_service_initialization_fase3 FAILED [  9%]
tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_sales_report_with_tax_breakdown FAILED [ 10%]
tests/test_authentication_flow.py::TestAuthenticationFlow::test_correct_application_flow FAILED [ 10%]
tests/test_authentication_flow.py::TestAuthenticationFlow::test_login_window_authentication_failure FAILED [ 10%]
tests/test_authentication_flow.py::TestAuthenticationFlow::test_login_window_authentication_success FAILED [ 10%]
tests/test_authentication_flow.py::TestAuthenticationFlow::test_main_window_requires_authentication FAILED [ 10%]
tests/test_authentication_flow.py::TestAuthenticationFlow::test_main_window_works_with_authentication FAILED [ 10%]
tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_cache_integration FAILED [ 11%]
tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_error_handling_with_logging FAILED [ 11%]
tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_get_barcode_statistics_optimized FAILED [ 11%]
tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_init_uses_fase3_pattern FAILED [ 11%]
tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_read_barcode_with_logging FAILED [ 11%]
tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_search_product_by_code_uses_db_helper FAILED [ 11%]
tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_validate_barcode_uses_validation_helper FAILED [ 12%]
tests/test_barcode_service_fase3_optimization.py::TestLabelServiceFase3Optimization::test_create_product_label_with_db_helper FAILED [ 12%]
tests/test_barcode_service_fase3_optimization.py::TestLabelServiceFase3Optimization::test_generate_barcode_image_with_validation FAILED [ 12%]
tests/test_barcode_service_fase3_optimization.py::TestLabelServiceFase3Optimization::test_generate_labels_pdf_with_logging FAILED [ 12%]
tests/test_barcode_service_fase3_optimization.py::TestLabelServiceFase3Optimization::test_init_uses_fase3_pattern FAILED [ 12%]
tests/test_barcode_service_fase3_optimization.py::TestLabelServiceFase3Optimization::test_performance_metrics_tracking FAILED [ 12%]
tests/test_barcode_service_fase3_optimization.py::TestUSBHIDIntegration::test_auto_connect_first_device_optimized FAILED [ 12%]
tests/test_barcode_service_fase3_optimization.py::TestUSBHIDIntegration::test_detect_usb_readers_with_logging FAILED [ 13%]
tests/test_barcode_service_fase3_optimization.py::TestUSBHIDIntegration::test_read_with_timeout_and_validation FAILED [ 13%]
tests/test_barcode_service_fase3_optimization.py::TestBarcodeSystemIntegration::test_complete_workflow_scan_to_label FAILED [ 13%]
tests/test_barcode_service_fase3_optimization.py::TestBarcodeSystemIntegration::test_error_recovery_and_logging FAILED [ 13%]
tests/test_barcode_service_fase3_optimization.py::TestBarcodeSystemIntegration::test_performance_optimization_validation FAILED [ 13%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_cancel_edit_functionality ERROR [ 13%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_category_selection ERROR [ 14%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_category_window_initialization ERROR [ 14%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_create_category_integration ERROR [ 14%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_delete_category_integration ERROR [ 14%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_error_handling_invalid_data ERROR [ 14%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_filter_by_type ERROR [ 14%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_form_validation ERROR [ 15%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_initial_button_states ERROR [ 15%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_load_categories_success ERROR [ 15%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_new_category_mode ERROR [ 15%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_search_functionality ERROR [ 15%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_ui_elements_created ERROR [ 15%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_update_category_integration ERROR [ 16%]
tests/test_category_form_basic.py::TestCategoryFormBasic::test_window_close_protocol ERROR [ 16%]
tests/test_category_loading_diagnosis.py::TestCategoryLoadingDiagnosis::test_1_database_connection_works PASSED [ 16%]
tests/test_category_loading_diagnosis.py::TestCategoryLoadingDiagnosis::test_2_default_categories_exist PASSED [ 16%]
tests/test_category_loading_diagnosis.py::TestCategoryLoadingDiagnosis::test_3_category_service_initialization FAILED [ 16%]
tests/test_category_loading_diagnosis.py::TestCategoryLoadingDiagnosis::test_4_get_all_categories_method PASSED [ 16%]
tests/test_category_loading_diagnosis.py::TestCategoryLoadingDiagnosis::test_5_simulate_form_loading FAILED [ 16%]
tests/test_client_form_basic.py::TestClientFormBasic::test_cancel_edit_functionality ERROR [ 17%]
tests/test_client_form_basic.py::TestClientFormBasic::test_client_selection ERROR [ 17%]
tests/test_client_form_basic.py::TestClientFormBasic::test_client_window_initialization ERROR [ 17%]
tests/test_client_form_basic.py::TestClientFormBasic::test_create_client_integration ERROR [ 17%]
tests/test_client_form_basic.py::TestClientFormBasic::test_create_client_without_ruc ERROR [ 17%]
tests/test_client_form_basic.py::TestClientFormBasic::test_deactivate_client_integration ERROR [ 17%]
tests/test_client_form_basic.py::TestClientFormBasic::test_display_client_with_ruc ERROR [ 18%]
tests/test_client_form_basic.py::TestClientFormBasic::test_display_client_without_ruc ERROR [ 18%]
tests/test_client_form_basic.py::TestClientFormBasic::test_edit_client_mode ERROR [ 18%]
tests/test_client_form_basic.py::TestClientFormBasic::test_error_handling_empty_name ERROR [ 18%]
tests/test_client_form_basic.py::TestClientFormBasic::test_form_validation_name_required ERROR [ 18%]
tests/test_client_form_basic.py::TestClientFormBasic::test_form_validation_ruc_optional ERROR [ 18%]
tests/test_client_form_basic.py::TestClientFormBasic::test_initial_button_states ERROR [ 19%]
tests/test_client_form_basic.py::TestClientFormBasic::test_initial_form_states ERROR [ 19%]
tests/test_client_form_basic.py::TestClientFormBasic::test_load_clients_success ERROR [ 19%]
tests/test_client_form_basic.py::TestClientFormBasic::test_new_client_mode ERROR [ 19%]
tests/test_client_form_basic.py::TestClientFormBasic::test_no_selection_edit_warning ERROR [ 19%]
tests/test_client_form_basic.py::TestClientFormBasic::test_search_functionality ERROR [ 19%]
tests/test_client_form_basic.py::TestClientFormBasic::test_ui_elements_created ERROR [ 19%]
tests/test_client_form_basic.py::TestClientFormBasic::test_update_client_integration ERROR [ 20%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_client_exists_by_name_case_insensitive FAILED [ 20%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_client_exists_by_name_false FAILED [ 20%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_client_exists_by_name_true FAILED [ 20%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_client_exists_by_ruc_false FAILED [ 20%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_client_exists_by_ruc_true FAILED [ 20%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_compatibility_with_existing_interface FAILED [ 21%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_duplicate_name_should_fail FAILED [ 21%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_duplicate_ruc_should_fail FAILED [ 21%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_empty_name_should_fail FAILED [ 21%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_invalid_ruc_should_fail FAILED [ 21%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_valid_data FAILED [ 21%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_whitespace_name_should_fail FAILED [ 22%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_without_ruc FAILED [ 22%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_data_cleaning_nombre FAILED [ 22%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_data_cleaning_ruc FAILED [ 22%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_database_connection_error_handling FAILED [ 22%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_all_clients_empty FAILED [ 22%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_all_clients_including_inactive FAILED [ 22%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_all_clients_only_active FAILED [ 23%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_all_clients_with_data FAILED [ 23%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_client_by_id_existing FAILED [ 23%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_client_by_id_nonexistent FAILED [ 23%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_return_types_unchanged FAILED [ 23%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_ruc_validation_boundary_values FAILED [ 23%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_ruc_validation_maximum_length FAILED [ 24%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_ruc_validation_minimum_length FAILED [ 24%]
tests/test_client_service_optimization.py::TestClientServiceOptimization::test_sql_injection_protection FAILED [ 24%]
tests/test_client_service_optimization.py::TestClientServiceWithMocks::test_client_exists_methods_with_mocks PASSED [ 24%]
tests/test_client_service_optimization.py::TestClientServiceWithMocks::test_create_client_with_mock_success FAILED [ 24%]
tests/test_client_service_optimization.py::TestClientServiceWithMocks::test_get_client_by_id_with_mock_found FAILED [ 24%]
tests/test_client_service_optimization.py::TestClientServiceWithMocks::test_get_client_by_id_with_mock_not_found PASSED [ 25%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_backup_functionality FAILED [ 25%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_configuration_export FAILED [ 25%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_configuration_import FAILED [ 25%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_data_persistence FAILED [ 25%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_restore_functionality FAILED [ 25%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_service_logging FAILED [ 25%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_error_handling FAILED [ 26%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_generate_company_report FAILED [ 26%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_get_company_for_ticket_generation FAILED [ 26%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_get_company_info_success FAILED [ 26%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_service_initialization FAILED [ 26%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_update_company_info_success FAILED [ 26%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_update_company_partial_data FAILED [ 27%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_validate_company_data_invalid FAILED [ 27%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_validate_company_data_valid FAILED [ 27%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_validate_email_format FAILED [ 27%]
tests/test_company_service_basic.py::TestCompanyServiceBasic::test_validate_ruc_format FAILED [ 27%]
tests/test_company_service_basic.py::TestCompanyServiceIntegration::test_integration_with_database FAILED [ 27%]
tests/test_company_service_basic.py::TestCompanyServiceIntegration::test_integration_with_ticket_service FAILED [ 28%]
tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_backup_restore_functionality FAILED [ 28%]
tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_export_import_configuration FAILED [ 28%]
tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_get_company_for_ticket_generation FAILED [ 28%]
tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_get_company_info_success FAILED [ 28%]
tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_service_initialization FAILED [ 28%]
tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_update_company_info_success FAILED [ 29%]
tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_validate_company_data_invalid FAILED [ 29%]
tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_validate_company_data_valid FAILED [ 29%]
tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_validate_email_format FAILED [ 29%]
tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_validate_ruc_format FAILED [ 29%]
tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_compatibility_with_existing_tests ERROR [ 29%]
tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_critical_system_functionality ERROR [ 29%]
tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_database_helper_functionality ERROR [ 30%]
tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_logging_helper_functionality ERROR [ 30%]
tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_new_optimized_methods ERROR [ 30%]
tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_optimized_services_initialization ERROR [ 30%]
tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_optimized_services_performance ERROR [ 30%]
tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_system_error_handling ERROR [ 30%]
tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_user_service_analysis ERROR [ 31%]
tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_validation_helper_functionality ERROR [ 31%]
tests/test_critical_fixes.py::TestDatabaseConnectionCriticalFixes::test_database_connection_compatible_with_main FAILED [ 31%]
tests/test_critical_fixes.py::TestDatabaseConnectionCriticalFixes::test_database_connection_constructor_accepts_db_path FAILED [ 31%]
tests/test_critical_fixes.py::TestDatabaseConnectionCriticalFixes::test_database_connection_has_required_methods FAILED [ 31%]
tests/test_critical_fixes.py::TestDatabaseConnectionCriticalFixes::test_global_connection_function_works PASSED [ 31%]
tests/test_critical_fixes.py::TestMainWindowCriticalFixes::test_main_window_constructor_compatibility FAILED [ 32%]
tests/test_critical_fixes.py::TestSyntaxErrorFixes::test_main_compiles PASSED [ 32%]
tests/test_critical_fixes.py::TestSyntaxErrorFixes::test_main_window_compiles FAILED [ 32%]
tests/test_critical_fixes.py::TestSyntaxErrorFixes::test_product_form_compiles FAILED [ 32%]
tests/test_critical_fixes.py::TestIntegrationCriticalFixes::test_main_flow_integration FAILED [ 32%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_config_db_module PASSED [ 32%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_consistency_across_services PASSED [ 32%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_database_connection_class_exists PASSED [ 33%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_database_helper_integration PASSED [ 33%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_get_database_connection_singleton PASSED [ 33%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_initialize_database_function PASSED [ 33%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_main_py_initialization_pattern FAILED [ 33%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_no_redundant_db_connection_function PASSED [ 33%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_product_service_database_usage PASSED [ 34%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_user_service_database_usage FAILED [ 34%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_user_service_database_usage ERROR [ 34%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionPerformance::test_singleton_performance FAILED [ 34%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionSecurity::test_foreign_keys_enabled PASSED [ 34%]
tests/test_database_connection_evaluation.py::TestDatabaseConnectionSecurity::test_password_hashing_consistency PASSED [ 34%]
tests/test_fase2_validation.py::TestDatabaseIntegration::test_database_initial_data FAILED [ 34%]
tests/test_fase2_validation.py::TestDatabaseIntegration::test_database_schema_creation FAILED [ 35%]
tests/test_fase2_validation.py::TestDatabaseIntegration::test_database_schema_integrity FAILED [ 35%]
tests/test_fase2_validation.py::TestDatabaseIntegration::test_database_version_control FAILED [ 35%]
tests/test_fase2_validation.py::TestProductServiceValidation::test_get_all_products FAILED [ 35%]
tests/test_fase2_validation.py::TestProductServiceValidation::test_product_creation_complete FAILED [ 35%]
tests/test_fase2_validation.py::TestProductServiceValidation::test_product_crud_operations FAILED [ 35%]
tests/test_fase2_validation.py::TestProductServiceValidation::test_product_validation_rules FAILED [ 35%]
tests/test_fase2_validation.py::TestCategoryServiceValidation::test_category_service_exists_and_functional FAILED [ 36%]
tests/test_fase2_validation.py::TestClientServiceValidation::test_client_service_basic_functionality FAILED [ 36%]
tests/test_fase2_validation.py::TestSalesServiceValidation::test_sales_service_functionality FAILED [ 36%]
tests/test_fase2_validation.py::TestReportServiceValidation::test_report_service_functionality FAILED [ 36%]
tests/test_fase2_validation.py::TestAuthenticationValidation::test_login_window_exists PASSED [ 36%]
tests/test_fase2_validation.py::TestAuthenticationValidation::test_session_manager_exists FAILED [ 36%]
tests/test_fase2_validation.py::TestUserInterfaceValidation::test_main_window_functionality FAILED [ 37%]
tests/test_fase2_validation.py::TestUserInterfaceValidation::test_product_form_functionality PASSED [ 37%]
tests/test_fase2_validation.py::TestSystemIntegrationFlow::test_complete_application_flow FAILED [ 37%]
tests/test_fase2_validation.py::TestSystemIntegrationFlow::test_product_creation_to_inventory_flow FAILED [ 37%]
tests/test_fase3_optimization.py::TestFase3BaseUtilities::test_database_helper_exists PASSED [ 37%]
tests/test_fase3_optimization.py::TestFase3BaseUtilities::test_logging_helper_exists PASSED [ 37%]
tests/test_fase3_optimization.py::TestFase3BaseUtilities::test_validation_helper_exists PASSED [ 38%]
tests/test_fase3_optimization.py::TestFase3QueryOptimization::test_avoid_count_star_in_existence_checks FAILED [ 38%]
tests/test_fase3_optimization.py::TestFase3QueryOptimization::test_category_existence_optimized FAILED [ 38%]
tests/test_fase3_optimization.py::TestFase3QueryOptimization::test_existence_check_uses_limit_1 FAILED [ 38%]
tests/test_fase3_optimization.py::TestFase3CodeDeduplication::test_row_to_dict_centralized FAILED [ 38%]
tests/test_fase3_optimization.py::TestFase3CodeDeduplication::test_services_use_common_database_helper PASSED [ 38%]
tests/test_fase3_optimization.py::TestFase3CodeDeduplication::test_services_use_common_validation_helper FAILED [ 38%]
tests/test_fase3_optimization.py::TestFase3LoggingImprovement::test_logging_helper_provides_standard_logger FAILED [ 39%]
tests/test_fase3_optimization.py::TestFase3LoggingImprovement::test_services_use_consistent_logging PASSED [ 39%]
tests/test_fase3_optimization.py::TestFase3PerformanceImprovement::test_database_operations_are_efficient PASSED [ 39%]
tests/test_fase3_optimization.py::TestFase3PerformanceImprovement::test_minimal_database_calls PASSED [ 39%]
tests/test_fase3_optimization.py::TestFase3DocumentationUpdate::test_changelog_updated_for_phase3 FAILED [ 39%]
tests/test_fase3_optimization.py::TestFase3DocumentationUpdate::test_inventory_directory_updated FAILED [ 39%]
tests/test_fase3_optimization.py::TestFase3IntegrationValidation::test_category_service_still_functional_after_optimization PASSED [ 40%]
tests/test_fase3_optimization.py::TestFase3IntegrationValidation::test_product_service_still_functional_after_optimization FAILED [ 40%]
tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_connect_barcode_device_failure FAILED [ 40%]
tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_connect_barcode_device_success FAILED [ 40%]
tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_format_barcode FAILED [ 40%]
tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_lookup_product_by_barcode_found FAILED [ 40%]
tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_lookup_product_by_barcode_not_found FAILED [ 41%]
tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_read_barcode_success FAILED [ 41%]
tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_scan_barcode_devices FAILED [ 41%]
tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_validate_barcode_invalid_codes FAILED [ 41%]
tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_validate_barcode_valid_codes FAILED [ 41%]
tests/test_fase4_barcode_functionality.py::TestLabelService::test_create_product_label_basic FAILED [ 41%]
tests/test_fase4_barcode_functionality.py::TestLabelService::test_create_product_label_invalid_product FAILED [ 41%]
tests/test_fase4_barcode_functionality.py::TestLabelService::test_generate_barcode_image_invalid_code FAILED [ 42%]
tests/test_fase4_barcode_functionality.py::TestLabelService::test_generate_barcode_image_invalid_format FAILED [ 42%]
tests/test_fase4_barcode_functionality.py::TestLabelService::test_generate_barcode_image_success FAILED [ 42%]
tests/test_fase4_barcode_functionality.py::TestLabelService::test_get_available_templates FAILED [ 42%]
tests/test_fase4_barcode_functionality.py::TestLabelService::test_validate_template_data_invalid FAILED [ 42%]
tests/test_fase4_barcode_functionality.py::TestLabelService::test_validate_template_data_valid FAILED [ 42%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_detect_usb_devices_no_usb FAILED [ 43%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_get_basic_capabilities_printer PASSED [ 43%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_get_basic_capabilities_scanner PASSED [ 43%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_get_basic_capabilities_unknown PASSED [ 43%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_get_printer_capabilities PASSED [ 43%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_get_scanner_capabilities PASSED [ 43%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_identify_device_type_printer_by_keywords PASSED [ 44%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_identify_device_type_printer_by_vendor PASSED [ 44%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_identify_device_type_scanner_by_keywords PASSED [ 44%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_identify_device_type_scanner_by_vendor PASSED [ 44%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_identify_device_type_unknown PASSED [ 44%]
tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_start_stop_auto_scan PASSED [ 44%]
tests/test_fase4_barcode_functionality.py::TestBarcodeIntegration::test_barcode_to_label_workflow FAILED [ 45%]
tests/test_fase4_barcode_functionality.py::TestBarcodeIntegration::test_device_detection_and_configuration FAILED [ 45%]
tests/test_fase5_deployment.py::TestDeploymentInfrastructure::test_deployment_directory_structure FAILED [ 45%]
tests/test_fase5_deployment.py::TestDeploymentInfrastructure::test_deployment_scripts_exist FAILED [ 45%]
tests/test_fase5_deployment.py::TestDeploymentInfrastructure::test_installer_files_exist FAILED [ 45%]
tests/test_fase5_deployment.py::TestDocumentationComplete::test_documentation_directory_exists PASSED [ 45%]
tests/test_fase5_deployment.py::TestDocumentationComplete::test_technical_documentation_exists FAILED [ 45%]
tests/test_fase5_deployment.py::TestDocumentationComplete::test_training_materials_exist FAILED [ 46%]
tests/test_fase5_deployment.py::TestDocumentationComplete::test_user_manual_exists FAILED [ 46%]
tests/test_fase5_deployment.py::TestSystemReadyForProduction::test_all_services_importable PASSED [ 46%]
tests/test_fase5_deployment.py::TestSystemReadyForProduction::test_configuration_file_valid PASSED [ 46%]
tests/test_fase5_deployment.py::TestSystemReadyForProduction::test_database_initialization FAILED [ 46%]
tests/test_fase5_deployment.py::TestSystemReadyForProduction::test_main_executable_works PASSED [ 46%]
tests/test_fase5_deployment.py::TestDeploymentAssets::test_assets_directory_complete PASSED [ 47%]
tests/test_fase5_deployment.py::TestDeploymentAssets::test_license_file_exists PASSED [ 47%]
tests/test_fase5_deployment.py::TestDeploymentAssets::test_readme_exists FAILED [ 47%]
tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_all_services_comprehensive_coverage ERROR [ 47%]
tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_authentication_security ERROR [ 47%]
tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_barcode_functionality_basic ERROR [ 47%]
tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_barcode_services_availability ERROR [ 48%]
tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_complete_business_workflow_integration ERROR [ 48%]
tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_concurrent_operations_performance ERROR [ 48%]
tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_core_methods_functionality_coverage ERROR [ 48%]
tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_error_recovery_integration ERROR [ 48%]
tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_input_validation_security ERROR [ 48%]
tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_performance_benchmarks_critical_operations ERROR [ 48%]
tests/test_fase5a_performance.py::TestFase5APerformance::test_bulk_operations_performance ERROR [ 49%]
tests/test_fase5a_performance.py::TestFase5APerformance::test_complex_business_scenario_performance ERROR [ 49%]
tests/test_fase5a_performance.py::TestFase5APerformance::test_concurrent_operations_performance ERROR [ 49%]
tests/test_fase5a_performance.py::TestFase5APerformance::test_crud_operations_performance ERROR [ 49%]
tests/test_fase5a_performance.py::TestFase5APerformance::test_database_performance ERROR [ 49%]
tests/test_fase5a_performance.py::TestFase5APerformance::test_memory_usage_monitoring ERROR [ 49%]
tests/test_fase5a_performance.py::TestFase5APerformance::test_service_creation_performance ERROR [ 50%]
tests/test_fase5a_security.py::TestFase5ASecurity::test_authentication_security_robustness ERROR [ 50%]
tests/test_fase5a_security.py::TestFase5ASecurity::test_business_data_validation ERROR [ 50%]
tests/test_fase5a_security.py::TestFase5ASecurity::test_comprehensive_input_validation ERROR [ 50%]
tests/test_fase5a_security.py::TestFase5ASecurity::test_role_based_authorization ERROR [ 50%]
tests/test_fase5a_security.py::TestFase5ASecurity::test_sql_injection_protection ERROR [ 50%]
tests/test_fase5a_security.py::TestFase5ASecurity::test_system_integrity_after_attacks ERROR [ 51%]
tests/test_helpers_validation.py::TestValidationHelper::test_init_validation_helper PASSED [ 51%]
tests/test_helpers_validation.py::TestValidationHelper::test_sanitize_string_valid PASSED [ 51%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_barcode_format_invalid PASSED [ 51%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_barcode_format_valid PASSED [ 51%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_batch_data_invalid PASSED [ 51%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_batch_data_valid PASSED [ 51%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_category_data_invalid PASSED [ 52%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_category_data_valid PASSED [ 52%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_date_invalid PASSED [ 52%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_date_range_invalid PASSED [ 52%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_date_range_valid PASSED [ 52%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_date_valid PASSED [ 52%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_decimal_range_invalid FAILED [ 53%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_decimal_range_valid PASSED [ 53%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_email_invalid PASSED [ 53%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_email_valid PASSED [ 53%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_list_items_invalid FAILED [ 53%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_list_items_valid PASSED [ 53%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_non_empty_string_invalid PASSED [ 54%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_non_empty_string_valid PASSED [ 54%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_password_strength_common PASSED [ 54%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_password_strength_empty PASSED [ 54%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_password_strength_strong PASSED [ 54%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_password_strength_weak PASSED [ 54%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_phone_invalid PASSED [ 54%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_phone_valid PASSED [ 55%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_positive_integer_invalid FAILED [ 55%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_positive_integer_valid PASSED [ 55%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_product_data_invalid PASSED [ 55%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_product_data_valid PASSED [ 55%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_role_invalid PASSED [ 55%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_role_valid PASSED [ 56%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_username_invalid_cases FAILED [ 56%]
tests/test_helpers_validation.py::TestValidationHelper::test_validate_username_valid_cases PASSED [ 56%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_count_records_success PASSED [ 56%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_count_records_with_where PASSED [ 56%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_execute_batch_error PASSED [ 56%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_execute_batch_success PASSED [ 57%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_get_last_insert_id_error PASSED [ 57%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_get_last_insert_id_success PASSED [ 57%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_get_table_info_success PASSED [ 57%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_init_database_helper PASSED [ 57%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_optimize_database_error PASSED [ 57%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_optimize_database_success PASSED [ 58%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_record_exists_false PASSED [ 58%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_record_exists_true PASSED [ 58%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_row_to_dict_none PASSED [ 58%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_row_to_dict_with_sqlite_row FAILED [ 58%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_row_to_dict_with_tuple PASSED [ 58%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_safe_execute_error_handling PASSED [ 58%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_safe_execute_fetch_all_success PASSED [ 59%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_safe_execute_fetch_one_success PASSED [ 59%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_safe_execute_with_commit_error PASSED [ 59%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_safe_execute_with_commit_insert PASSED [ 59%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_safe_execute_with_commit_update PASSED [ 59%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_safe_execute_with_params PASSED [ 59%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_table_exists_false PASSED [ 60%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_table_exists_true PASSED [ 60%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_transaction_error_rollback PASSED [ 60%]
tests/test_helpers_validation.py::TestDatabaseHelper::test_transaction_success PASSED [ 60%]
tests/test_helpers_validation.py::TestLoggingHelper::test_configure_for_development PASSED [ 60%]
tests/test_helpers_validation.py::TestLoggingHelper::test_configure_for_production PASSED [ 60%]
tests/test_helpers_validation.py::TestLoggingHelper::test_get_log_statistics FAILED [ 61%]
tests/test_helpers_validation.py::TestLoggingHelper::test_get_service_logger FAILED [ 61%]
tests/test_helpers_validation.py::TestLoggingHelper::test_get_service_logger_cached FAILED [ 61%]
tests/test_helpers_validation.py::TestLoggingHelper::test_get_system_logger FAILED [ 61%]
tests/test_helpers_validation.py::TestLoggingHelper::test_get_ui_logger FAILED [ 61%]
tests/test_helpers_validation.py::TestLoggingHelper::test_log_authentication_attempt_failure FAILED [ 61%]
tests/test_helpers_validation.py::TestLoggingHelper::test_log_authentication_attempt_success FAILED [ 61%]
tests/test_helpers_validation.py::TestLoggingHelper::test_log_business_rule_violation FAILED [ 62%]
tests/test_helpers_validation.py::TestLoggingHelper::test_log_database_operation FAILED [ 62%]
tests/test_helpers_validation.py::TestLoggingHelper::test_log_error_with_context FAILED [ 62%]
tests/test_helpers_validation.py::TestLoggingHelper::test_log_performance_metrics_fast FAILED [ 62%]
tests/test_helpers_validation.py::TestLoggingHelper::test_log_performance_metrics_slow FAILED [ 62%]
tests/test_helpers_validation.py::TestLoggingHelper::test_log_user_action FAILED [ 62%]
tests/test_helpers_validation.py::TestLoggingHelper::test_setup_logging_already_configured PASSED [ 63%]
tests/test_helpers_validation.py::TestLoggingHelper::test_setup_logging_basic FAILED [ 63%]
tests/test_helpers_validation.py::TestLoggingContext::test_logging_context_success PASSED [ 63%]
tests/test_helpers_validation.py::TestLoggingContext::test_logging_context_with_exception PASSED [ 63%]
tests/test_helpers_validation.py::TestHelpersIntegration::test_batch_validation_with_database_transaction PASSED [ 63%]
tests/test_helpers_validation.py::TestHelpersIntegration::test_logging_with_validation_errors FAILED [ 63%]
tests/test_helpers_validation.py::TestHelpersIntegration::test_validate_and_insert_product PASSED [ 64%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_abc_analysis ERROR [ 64%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_category_statistics ERROR [ 64%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_current_inventory ERROR [ 64%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_by_category ERROR [ 64%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_movements ERROR [ 64%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_statistics ERROR [ 64%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_turnover_report ERROR [ 65%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_value ERROR [ 65%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_value_by_category ERROR [ 65%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_low_stock_products ERROR [ 65%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_movements_by_date_range ERROR [ 65%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_out_of_stock_products ERROR [ 65%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_product_movement_history ERROR [ 66%]
tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_validate_stock_availability ERROR [ 66%]
tests/test_models_validation.py::TestModelsValidation::test_cascade_delete_validation PASSED [ 66%]
tests/test_models_validation.py::TestModelsValidation::test_categoria_database_integrity PASSED [ 66%]
tests/test_models_validation.py::TestModelsValidation::test_categoria_nombre_constraints FAILED [ 66%]
tests/test_models_validation.py::TestModelsValidation::test_categoria_tipo_validation PASSED [ 66%]
tests/test_models_validation.py::TestModelsValidation::test_categoria_valid_creation PASSED [ 67%]
tests/test_models_validation.py::TestModelsValidation::test_cliente_email_validation FAILED [ 67%]
tests/test_models_validation.py::TestModelsValidation::test_cliente_ruc_validation FAILED [ 67%]
tests/test_models_validation.py::TestModelsValidation::test_cliente_valid_creation FAILED [ 67%]
tests/test_models_validation.py::TestModelsValidation::test_data_type_constraints PASSED [ 67%]
tests/test_models_validation.py::TestModelsValidation::test_movimiento_cantidad_signs PASSED [ 67%]
tests/test_models_validation.py::TestModelsValidation::test_movimiento_tipos_validation PASSED [ 67%]
tests/test_models_validation.py::TestModelsValidation::test_movimiento_valid_creation PASSED [ 68%]
tests/test_models_validation.py::TestModelsValidation::test_producto_decimal_precision PASSED [ 68%]
tests/test_models_validation.py::TestModelsValidation::test_producto_foreign_key_categoria PASSED [ 68%]
tests/test_models_validation.py::TestModelsValidation::test_producto_stock_validation PASSED [ 68%]
tests/test_models_validation.py::TestModelsValidation::test_producto_valid_creation PASSED [ 68%]
tests/test_models_validation.py::TestModelsValidation::test_usuario_rol_validation PASSED [ 68%]
tests/test_models_validation.py::TestModelsValidation::test_usuario_unique_constraint PASSED [ 69%]
tests/test_models_validation.py::TestModelsValidation::test_usuario_valid_creation PASSED [ 69%]
tests/test_models_validation.py::TestModelsValidation::test_venta_calculations_consistency PASSED [ 69%]
tests/test_models_validation.py::TestModelsValidation::test_venta_foreign_key_cliente PASSED [ 69%]
tests/test_models_validation.py::TestModelsValidation::test_venta_valid_creation PASSED [ 69%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_compatibility_original_methods_preserved PASSED [ 69%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_database_helper_integration PASSED [ 70%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_error_handling_consistency PASSED [ 70%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_fase3_helpers_initialization FAILED [ 70%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_get_movement_statistics FAILED [ 70%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_logging_helper_integration FAILED [ 70%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_movement_creation_optimized_flow FAILED [ 70%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_new_optimized_methods FAILED [ 70%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_performance_optimization_select_1_limit_1 PASSED [ 71%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_validate_movement_data_optimized FAILED [ 71%]
tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_validation_helper_integration PASSED [ 71%]
tests/test_product_form_connection.py::TestProductFormConnection::test_category_service_init_signature PASSED [ 71%]
tests/test_product_form_connection.py::TestProductFormConnection::test_category_service_receives_db_connection FAILED [ 71%]
tests/test_product_form_connection.py::TestProductFormConnection::test_category_service_with_proper_connection FAILED [ 71%]
tests/test_product_form_connection.py::TestProductFormConnection::test_database_connection_error_handling FAILED [ 72%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_activate_product ERROR [ 72%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_create_product_invalid_category ERROR [ 72%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_create_product_invalid_name ERROR [ 72%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_create_product_minimal_data ERROR [ 72%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_create_product_negative_values ERROR [ 72%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_create_product_success ERROR [ 73%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_deactivate_product ERROR [ 73%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_get_all_products ERROR [ 73%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_get_low_stock_products ERROR [ 73%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_get_product_by_id_not_found ERROR [ 73%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_get_product_by_id_success ERROR [ 73%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_get_products_by_category ERROR [ 74%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_search_products_by_name ERROR [ 74%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_product_invalid_data ERROR [ 74%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_product_not_found ERROR [ 74%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_product_success ERROR [ 74%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_stock_add ERROR [ 74%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_stock_insufficient ERROR [ 74%]
tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_stock_subtract ERROR [ 75%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_all_crud_operations_working FAILED [ 75%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_backward_compatibility_fase1_fase3 FAILED [ 75%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_bulk_operations_performance_fase3 FAILED [ 75%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_business_rules_preserved FAILED [ 75%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_create_product_performance_fase3 FAILED [ 75%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_database_helper_implementation FAILED [ 76%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_database_operations_with_db_helper FAILED [ 76%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_integration_with_optimized_services FAILED [ 76%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_logging_helper_implementation FAILED [ 76%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_logging_with_logging_helper FAILED [ 76%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_search_products_performance_fase3 FAILED [ 76%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_validation_helper_implementation FAILED [ 77%]
tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_validations_with_validation_helper FAILED [ 77%]
tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_get_product_by_id_not_found PASSED [ 77%]
tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_get_product_by_id_returns_producto_object FAILED [ 77%]
tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_get_product_by_id_with_none_values FAILED [ 77%]
tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_method_signature_unchanged FAILED [ 77%]
tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_object_has_all_required_attributes FAILED [ 77%]
tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_sales_form_compatibility FAILED [ 78%]
tests/test_pytest_validation_basic.py::TestPytestValidation::test_pytest_configuration_valid PASSED [ 78%]
tests/test_pytest_validation_basic.py::TestPytestValidation::test_imports_basic PASSED [ 78%]
tests/test_pytest_validation_basic.py::TestPytestValidation::test_project_structure PASSED [ 78%]
tests/test_pytest_validation_basic.py::TestPytestValidation::test_database_connection_available PASSED [ 78%]
tests/test_pytest_validation_basic.py::TestPytestValidation::test_fase5a_marker PASSED [ 78%]
tests/test_pytest_validation_basic.py::TestPytestValidation::test_pytest_markers_configured PASSED [ 79%]
tests/test_pytest_validation_basic.py::TestPytestValidation::test_coverage_configuration PASSED [ 79%]
tests/test_pytest_validation_basic.py::TestPytestValidation::test_timeout_configuration PASSED [ 79%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_date_fields_exist FAILED [ 79%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_date_validation FAILED [ 79%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_error_handling FAILED [ 79%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_export_to_excel_functionality FAILED [ 80%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_filter_options FAILED [ 80%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_form_has_required_tabs FAILED [ 80%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_form_initialization FAILED [ 80%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_form_keyboard_shortcuts FAILED [ 80%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_form_responsive_design FAILED [ 80%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_generate_inventory_report_failure FAILED [ 80%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_generate_inventory_report_success FAILED [ 81%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_generate_movements_report_success FAILED [ 81%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_generate_sales_report_success FAILED [ 81%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_progress_bar_functionality FAILED [ 81%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_report_history_functionality FAILED [ 81%]
tests/test_reports_form_basic.py::TestReportsFormBasic::test_report_preview_functionality FAILED [ 81%]
tests/test_reports_form_basic.py::TestReportsFormIntegration::test_integration_with_report_service FAILED [ 82%]
tests/test_reports_form_basic.py::TestReportsFormIntegration::test_real_report_generation FAILED [ 82%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_concurrent_report_generation FAILED [ 82%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_concurrent_report_generation ERROR [ 82%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_error_handling_invalid_dates FAILED [ 82%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_error_handling_invalid_dates ERROR [ 82%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_error_handling_pdf_generation FAILED [ 82%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_error_handling_pdf_generation ERROR [ 82%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_generate_pdf_report_function FAILED [ 82%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_generate_pdf_report_function ERROR [ 82%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_inventory_report_generation FAILED [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_inventory_report_generation ERROR [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_logging_integration FAILED [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_logging_integration ERROR [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_memory_usage_cleanup FAILED [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_memory_usage_cleanup ERROR [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_movements_report_generation FAILED [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_movements_report_generation ERROR [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_inventory FAILED [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_inventory ERROR [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_movements FAILED [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_movements ERROR [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_profitability FAILED [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_profitability ERROR [ 83%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_sales FAILED [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_sales ERROR [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_performance_large_dataset FAILED [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_performance_large_dataset ERROR [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_profitability_report_generation FAILED [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_profitability_report_generation ERROR [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_report_service_export_to_pdf_integration FAILED [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_report_service_export_to_pdf_integration ERROR [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_report_service_optimization_pattern FAILED [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_report_service_optimization_pattern ERROR [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_sales_report_generation FAILED [ 84%]
tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_sales_report_generation ERROR [ 84%]
tests/test_sales_form_correction.py::TestSalesFormCorrection::test_all_services_initialization_integration PASSED [ 85%]
tests/test_sales_form_correction.py::TestSalesFormCorrection::test_barcode_service_initialization_without_dependencies PASSED [ 85%]
tests/test_sales_form_correction.py::TestSalesFormCorrection::test_barcode_service_search_product_with_product_service PASSED [ 85%]
tests/test_sales_form_correction.py::TestSalesFormCorrection::test_barcode_service_search_product_without_product_service PASSED [ 85%]
tests/test_sales_form_correction.py::TestSalesFormCorrection::test_barcode_service_set_product_service_method PASSED [ 85%]
tests/test_sales_form_correction.py::TestSalesFormCorrection::test_product_service_initialization_with_db_connection PASSED [ 85%]
tests/test_sales_form_correction.py::TestSalesFormCorrection::test_sales_window_initialization_pattern_corrected FAILED [ 86%]
tests/test_sales_form_initialization.py::TestSalesFormInitialization::test_get_database_connection_returns_valid_object PASSED [ 86%]
tests/test_sales_form_initialization.py::TestSalesFormInitialization::test_product_service_initialization_with_db_connection PASSED [ 86%]
tests/test_sales_form_initialization.py::TestSalesFormInitialization::test_product_service_missing_argument_error PASSED [ 86%]
tests/test_sales_form_initialization.py::TestSalesFormInitialization::test_sales_form_import_and_initialization PASSED [ 86%]
tests/test_sales_form_initialization.py::TestSalesFormInitialization::test_sales_form_service_initialization_pattern PASSED [ 86%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_add_product_to_sale_compatibility FAILED [ 87%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_category_type_optimization FAILED [ 87%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_centralized_validation FAILED [ 87%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_client_exists_optimization FAILED [ 87%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_create_sale_compatibility FAILED [ 87%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_error_handling_with_helpers FAILED [ 87%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_get_all_sales_new_method FAILED [ 87%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_get_sale_by_id_compatibility FAILED [ 88%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_get_sales_by_date_range_new_method FAILED [ 88%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_get_sales_statistics_new_method FAILED [ 88%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_helpers_initialization FAILED [ 88%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_maintains_original_interface FAILED [ 88%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_mock_compatibility FAILED [ 88%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_optimized_database_operations FAILED [ 89%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_performance_improvement FAILED [ 89%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_product_exists_optimization FAILED [ 89%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_sales_service_initialization_compatibility FAILED [ 89%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_standardized_logging FAILED [ 89%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_validate_sale_data_new_method FAILED [ 89%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_validation_rules_compatibility FAILED [ 90%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimizationIntegration::test_complete_sale_flow_optimized FAILED [ 90%]
tests/test_sales_service_optimization.py::TestSalesServiceOptimizationIntegration::test_performance_comparison_with_original FAILED [ 90%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_actualizar_pdf_path_success FAILED [ 90%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_actualizar_pdf_path_ticket_no_existe PASSED [ 90%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_eliminar_ticket_no_existe FAILED [ 90%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_eliminar_ticket_success FAILED [ 90%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_error_handling_database FAILED [ 91%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_generar_ticket_entrada_movimiento_inexistente FAILED [ 91%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_generar_ticket_entrada_movimiento_venta FAILED [ 91%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_generar_ticket_entrada_success PASSED [ 91%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_generar_ticket_venta_duplicado FAILED [ 91%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_generar_ticket_venta_success PASSED [ 91%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_generar_ticket_venta_venta_inexistente FAILED [ 92%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_estadisticas_tickets_empty PASSED [ 92%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_estadisticas_tickets_success FAILED [ 92%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_ticket_por_id_no_existe PASSED [ 92%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_ticket_por_id_success FAILED [ 92%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_tickets_por_fecha_success FAILED [ 92%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_tickets_por_movimiento_success FAILED [ 93%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_tickets_por_venta_success FAILED [ 93%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_tickets_sin_pdf_success FAILED [ 93%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_ultimo_ticket_por_tipo_invalido FAILED [ 93%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_ultimo_ticket_por_tipo_success FAILED [ 93%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_reimprimir_ticket_no_existe PASSED [ 93%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_reimprimir_ticket_success FAILED [ 93%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_service_initialization PASSED [ 94%]
tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_validation_ticket_number_generation PASSED [ 94%]
tests/test_ticket_service_basic.py::TestTicketServiceIntegration::test_integration_with_database PASSED [ 94%]
tests/test_ticket_service_basic.py::TestTicketServiceIntegration::test_integration_with_movement_service SKIPPED [ 94%]
tests/test_ticket_service_basic.py::TestTicketServiceIntegration::test_integration_with_sales_service SKIPPED [ 94%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_authenticate_logs_attempts PASSED [ 94%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_authenticate_maintains_compatibility FAILED [ 95%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_authenticate_with_invalid_credentials PASSED [ 95%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_backward_compatibility_all_methods PASSED [ 95%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_create_user_with_enhanced_validations PASSED [ 95%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_create_user_with_strong_password FAILED [ 95%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_database_helper_usage PASSED [ 95%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_error_handling_improvement FAILED [ 96%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_get_user_statistics FAILED [ 96%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_get_users_by_role FAILED [ 96%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_logging_helper_usage FAILED [ 96%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_performance_vs_original PASSED [ 96%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_security_enhancements PASSED [ 96%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_user_service_uses_fase3_pattern FAILED [ 96%]
tests/test_user_service_optimization.py::TestUserServiceOptimization::test_validation_helper_usage PASSED [ 97%]
tests/ui/auth/test_login_window_widget_lifecycle.py::TestLoginWindowWidgetLifecycle::test_successful_login_no_widget_error FAILED [ 97%]
tests/ui/auth/test_login_window_widget_lifecycle.py::TestLoginWindowWidgetLifecycle::test_widget_exists_before_modification FAILED [ 97%]
tests/unit/test_categoria_activo_field.py::TestCategoriaActivoField::test_categoria_activo_methods PASSED [ 97%]
tests/unit/test_categoria_activo_field.py::TestCategoriaActivoField::test_categoria_constructor_with_activo_default PASSED [ 97%]
tests/unit/test_categoria_activo_field.py::TestCategoriaActivoField::test_categoria_constructor_with_activo_explicit PASSED [ 97%]
tests/unit/test_categoria_activo_field.py::TestCategoriaActivoField::test_categoria_crear_material_with_activo PASSED [ 98%]
tests/unit/test_categoria_activo_field.py::TestCategoriaActivoField::test_categoria_crear_servicio_with_activo PASSED [ 98%]
tests/unit/test_categoria_activo_field.py::TestCategoriaActivoField::test_categoria_equality_considers_activo PASSED [ 98%]
tests/unit/test_categoria_activo_field.py::TestCategoriaActivoField::test_categoria_from_dict_includes_activo PASSED [ 98%]
tests/unit/test_categoria_activo_field.py::TestCategoriaActivoField::test_categoria_str_includes_activo PASSED [ 98%]
tests/unit/test_categoria_activo_field.py::TestCategoriaActivoField::test_categoria_to_dict_includes_activo PASSED [ 98%]
tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_material_can_have_nonzero_stock ERROR [ 99%]
tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_producto_service_enforces_stock_restriction ERROR [ 99%]
tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_servicio_creation_with_nonzero_stock_rejected ERROR [ 99%]
tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_servicio_modelo_validates_zero_stock ERROR [ 99%]
tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_servicio_stock_zero_on_creation ERROR [ 99%]
tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_update_material_stock_allowed ERROR [ 99%]
tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_update_servicio_stock_to_nonzero_rejected ERROR [100%]

=================================== ERRORS ====================================
___ ERROR at setup of TestCategoryFormBasic.test_cancel_edit_functionality ____
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_______ ERROR at setup of TestCategoryFormBasic.test_category_selection _______
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestCategoryFormBasic.test_category_window_initialization _
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestCategoryFormBasic.test_create_category_integration ___
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestCategoryFormBasic.test_delete_category_integration ___
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestCategoryFormBasic.test_error_handling_invalid_data ___
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_________ ERROR at setup of TestCategoryFormBasic.test_filter_by_type _________
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
________ ERROR at setup of TestCategoryFormBasic.test_form_validation _________
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_____ ERROR at setup of TestCategoryFormBasic.test_initial_button_states ______
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestCategoryFormBasic.test_load_categories_success _____
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_______ ERROR at setup of TestCategoryFormBasic.test_new_category_mode ________
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
______ ERROR at setup of TestCategoryFormBasic.test_search_functionality ______
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
______ ERROR at setup of TestCategoryFormBasic.test_ui_elements_created _______
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestCategoryFormBasic.test_update_category_integration ___
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_____ ERROR at setup of TestCategoryFormBasic.test_window_close_protocol ______
tests\test_category_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestClientFormBasic.test_cancel_edit_functionality _____
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_________ ERROR at setup of TestClientFormBasic.test_client_selection _________
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
___ ERROR at setup of TestClientFormBasic.test_client_window_initialization ___
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestClientFormBasic.test_create_client_integration _____
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestClientFormBasic.test_create_client_without_ruc _____
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestClientFormBasic.test_deactivate_client_integration ___
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_____ ERROR at setup of TestClientFormBasic.test_display_client_with_ruc ______
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestClientFormBasic.test_display_client_without_ruc ____
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_________ ERROR at setup of TestClientFormBasic.test_edit_client_mode _________
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestClientFormBasic.test_error_handling_empty_name _____
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestClientFormBasic.test_form_validation_name_required ___
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
___ ERROR at setup of TestClientFormBasic.test_form_validation_ruc_optional ___
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
______ ERROR at setup of TestClientFormBasic.test_initial_button_states _______
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_______ ERROR at setup of TestClientFormBasic.test_initial_form_states ________
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_______ ERROR at setup of TestClientFormBasic.test_load_clients_success _______
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_________ ERROR at setup of TestClientFormBasic.test_new_client_mode __________
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestClientFormBasic.test_no_selection_edit_warning _____
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_______ ERROR at setup of TestClientFormBasic.test_search_functionality _______
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_______ ERROR at setup of TestClientFormBasic.test_ui_elements_created ________
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestClientFormBasic.test_update_client_integration _____
tests\test_client_form_basic.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestCompleteSystemValidation.test_compatibility_with_existing_tests _
tests\test_complete_system_validation.py:62: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestCompleteSystemValidation.test_critical_system_functionality _
tests\test_complete_system_validation.py:62: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestCompleteSystemValidation.test_database_helper_functionality _
tests\test_complete_system_validation.py:62: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestCompleteSystemValidation.test_logging_helper_functionality _
tests\test_complete_system_validation.py:62: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestCompleteSystemValidation.test_new_optimized_methods __
tests\test_complete_system_validation.py:62: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestCompleteSystemValidation.test_optimized_services_initialization _
tests\test_complete_system_validation.py:62: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestCompleteSystemValidation.test_optimized_services_performance _
tests\test_complete_system_validation.py:62: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestCompleteSystemValidation.test_system_error_handling __
tests\test_complete_system_validation.py:62: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestCompleteSystemValidation.test_user_service_analysis __
tests\test_complete_system_validation.py:62: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestCompleteSystemValidation.test_validation_helper_functionality _
tests\test_complete_system_validation.py:62: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at teardown of TestDatabaseConnectionEvaluation.test_user_service_database_usage _
tests\test_database_connection_evaluation.py:40: in tearDown
    os.unlink(self.db_path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp9cu1ekzv.db'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
_ ERROR at setup of TestFase5ACoverageAnalysis.test_all_services_comprehensive_coverage _
tests\test_fase5a_coverage_analysis.py:76: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestFase5ACoverageAnalysis.test_authentication_security __
tests\test_fase5a_coverage_analysis.py:76: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5ACoverageAnalysis.test_barcode_functionality_basic _
tests\test_fase5a_coverage_analysis.py:76: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5ACoverageAnalysis.test_barcode_services_availability _
tests\test_fase5a_coverage_analysis.py:76: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5ACoverageAnalysis.test_complete_business_workflow_integration _
tests\test_fase5a_coverage_analysis.py:76: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5ACoverageAnalysis.test_concurrent_operations_performance _
tests\test_fase5a_coverage_analysis.py:76: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5ACoverageAnalysis.test_core_methods_functionality_coverage _
tests\test_fase5a_coverage_analysis.py:76: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5ACoverageAnalysis.test_error_recovery_integration _
tests\test_fase5a_coverage_analysis.py:76: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5ACoverageAnalysis.test_input_validation_security _
tests\test_fase5a_coverage_analysis.py:76: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5ACoverageAnalysis.test_performance_benchmarks_critical_operations _
tests\test_fase5a_coverage_analysis.py:76: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestFase5APerformance.test_bulk_operations_performance ___
tests\test_fase5a_performance.py:56: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5APerformance.test_complex_business_scenario_performance _
tests\test_fase5a_performance.py:56: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5APerformance.test_concurrent_operations_performance _
tests\test_fase5a_performance.py:56: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestFase5APerformance.test_crud_operations_performance ___
tests\test_fase5a_performance.py:56: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
______ ERROR at setup of TestFase5APerformance.test_database_performance ______
tests\test_fase5a_performance.py:56: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestFase5APerformance.test_memory_usage_monitoring _____
tests\test_fase5a_performance.py:56: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestFase5APerformance.test_service_creation_performance __
tests\test_fase5a_performance.py:56: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestFase5ASecurity.test_authentication_security_robustness _
tests\test_fase5a_security.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_____ ERROR at setup of TestFase5ASecurity.test_business_data_validation ______
tests\test_fase5a_security.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestFase5ASecurity.test_comprehensive_input_validation ___
tests\test_fase5a_security.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_____ ERROR at setup of TestFase5ASecurity.test_role_based_authorization ______
tests\test_fase5a_security.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_____ ERROR at setup of TestFase5ASecurity.test_sql_injection_protection ______
tests\test_fase5a_security.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestFase5ASecurity.test_system_integrity_after_attacks ___
tests\test_fase5a_security.py:54: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
______ ERROR at setup of TestInventoryServiceBasic.test_get_abc_analysis ______
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestInventoryServiceBasic.test_get_category_statistics ___
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
___ ERROR at setup of TestInventoryServiceBasic.test_get_current_inventory ____
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestInventoryServiceBasic.test_get_inventory_by_category __
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestInventoryServiceBasic.test_get_inventory_movements ___
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestInventoryServiceBasic.test_get_inventory_statistics __
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestInventoryServiceBasic.test_get_inventory_turnover_report _
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestInventoryServiceBasic.test_get_inventory_value _____
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestInventoryServiceBasic.test_get_inventory_value_by_category _
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
___ ERROR at setup of TestInventoryServiceBasic.test_get_low_stock_products ___
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestInventoryServiceBasic.test_get_movements_by_date_range _
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestInventoryServiceBasic.test_get_out_of_stock_products __
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestInventoryServiceBasic.test_get_product_movement_history _
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestInventoryServiceBasic.test_validate_stock_availability _
tests\test_inventory_service_basic.py:52: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_____ ERROR at setup of TestProductServiceBasicCRUD.test_activate_product _____
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_create_product_invalid_category _
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_create_product_invalid_name _
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_create_product_minimal_data _
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_create_product_negative_values _
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestProductServiceBasicCRUD.test_create_product_success __
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ ERROR at setup of TestProductServiceBasicCRUD.test_deactivate_product ____
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_____ ERROR at setup of TestProductServiceBasicCRUD.test_get_all_products _____
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestProductServiceBasicCRUD.test_get_low_stock_products __
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_get_product_by_id_not_found _
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_get_product_by_id_success _
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_get_products_by_category _
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_search_products_by_name __
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_update_product_invalid_data _
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_update_product_not_found _
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestProductServiceBasicCRUD.test_update_product_success __
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_____ ERROR at setup of TestProductServiceBasicCRUD.test_update_stock_add _____
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestProductServiceBasicCRUD.test_update_stock_insufficient _
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ ERROR at setup of TestProductServiceBasicCRUD.test_update_stock_subtract ___
tests\test_product_service_basic_crud.py:50: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at teardown of TestReportsSystemOptimization.test_concurrent_report_generation _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp2_aha2bl.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_error_handling_invalid_dates _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp1te9bwg6.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_error_handling_pdf_generation _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpoe5l37qa.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_generate_pdf_report_function _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp4u2gqbtl.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_inventory_report_generation _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp_cgafizk.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_logging_integration _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmphoe3af7z.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_memory_usage_cleanup _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp7unamx14.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_movements_report_generation _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp8yfj54ci.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_pdf_generation_inventory _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpqckbj_o7.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_pdf_generation_movements _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmplr4f66zi.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_pdf_generation_profitability _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpah0encag.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_pdf_generation_sales _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpazfv61u9.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_performance_large_dataset _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpxgmo9b2h.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_profitability_report_generation _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp909tnw_h.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_report_service_export_to_pdf_integration _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpxmmcl6n_.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_report_service_optimization_pattern _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp818oofy9.db'
_ ERROR at teardown of TestReportsSystemOptimization.test_sales_report_generation _
C:\Python312\Lib\unittest\case.py:58: in testPartExecutor
    yield
C:\Python312\Lib\unittest\case.py:671: in doCleanups
    self._callCleanup(function, *args, **kwargs)
C:\Python312\Lib\unittest\case.py:597: in _callCleanup
    function(*args, **kwargs)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpb17t0ap_.db'
_ ERROR at setup of TestServiceStockRestriction.test_material_can_have_nonzero_stock _
tests\unit\test_service_stock_restriction.py:49: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestServiceStockRestriction.test_producto_service_enforces_stock_restriction _
tests\unit\test_service_stock_restriction.py:49: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestServiceStockRestriction.test_servicio_creation_with_nonzero_stock_rejected _
tests\unit\test_service_stock_restriction.py:49: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestServiceStockRestriction.test_servicio_modelo_validates_zero_stock _
tests\unit\test_service_stock_restriction.py:49: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestServiceStockRestriction.test_servicio_stock_zero_on_creation _
tests\unit\test_service_stock_restriction.py:49: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestServiceStockRestriction.test_update_material_stock_allowed _
tests\unit\test_service_stock_restriction.py:49: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ ERROR at setup of TestServiceStockRestriction.test_update_servicio_stock_to_nonzero_rejected _
tests\unit\test_service_stock_restriction.py:49: in setUpClass
    cls.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
================================== FAILURES ===================================
_ TestProductServiceStockValidation.test_product_create_strict_service_with_stock_should_fail _
tests\api\test_product_schemas_service_validation.py:46: in test_product_create_strict_service_with_stock_should_fail
    with pytest.raises(ValidationError) as exc_info:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'pydantic_core._pydantic_core.ValidationError'>
_ TestProductServiceStockValidation.test_product_response_service_consistency_warning _
tests\api\test_product_schemas_service_validation.py:138: in test_product_response_service_consistency_warning
    response = ProductResponse(**response_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   pydantic_core._pydantic_core.ValidationError: 2 validation errors for ProductResponse
E   descripcion
E     Field required [type=missing, input_value={'id_producto': 1, 'nombr...: '2025-07-01T10:00:00'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
E   precio_compra
E     Field required [type=missing, input_value={'id_producto': 1, 'nombr...: '2025-07-01T10:00:00'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
___ TestUserServiceOptimization.test_authenticate_compatibility_maintained ____
tests\optimization\test_user_service_optimization.py:85: in test_authenticate_compatibility_maintained
    self.assertIsInstance(result, Usuario)
E   AssertionError: Usuario(id_usuario=1, nombre_usuario='admin', rol='ADMIN', activo=True) is not an instance of <class 'src.models.usuario.Usuario'>
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
INFO     inventory.services.user_service:user_service.py:120 Autenticacin exitosa para usuario: admin
INFO     inventory.system:logging_helper.py:162 USER_ACTION: {"user_id": 1, "action": "LOGIN_SUCCESS", "timestamp": "2025-07-04T08:27:56.853309", "details": {"username": "admin", "role": "ADMIN"}}
INFO     inventory.system:logging_helper.py:188 AUTH_ATTEMPT: {"username": "admin", "success": true, "ip_address": null, "timestamp": "2025-07-04T08:27:56.853309"}
________ TestUserServiceOptimization.test_enhanced_password_validation ________
tests\optimization\test_user_service_optimization.py:123: in test_enhanced_password_validation
    self.assertIsInstance(result, Usuario)
E   AssertionError: Usuario(id_usuario=1, nombre_usuario='testuser', rol='VENDEDOR', activo=True) is not an instance of <class 'src.models.usuario.Usuario'>
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:27:56 - inventory.services.user_service - ERROR - create_user:221 - Error creando usuario testuser: Contrasea no cumple criterios de seguridad: Debe tener al menos 8 caracteres; Contrasea demasiado comn
2025-07-04 08:27:56 - inventory.services.user_service - ERROR - create_user:221 - Error creando usuario testuser: Contrasea no cumple criterios de seguridad: Debe tener al menos 8 caracteres; Contrasea demasiado comn
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
ERROR    inventory.services.user_service:user_service.py:221 Error creando usuario testuser: Contrasea no cumple criterios de seguridad: Debe tener al menos 8 caracteres; Contrasea demasiado comn
INFO     inventory.services.user_service:user_service.py:210 Usuario creado exitosamente: testuser (ID: 1)
INFO     inventory.system:logging_helper.py:215 DB_OPERATION: {"table": "usuarios", "operation": "INSERT", "record_id": 1, "timestamp": "2025-07-04T08:27:56.869371", "details": {"username": "testuser", "role": "VENDEDOR"}}
__________ TestUserServiceOptimization.test_error_handling_improved ___________
tests\optimization\test_user_service_optimization.py:330: in test_error_handling_improved
    mock_log_error.assert_called()
C:\Python312\Lib\unittest\mock.py:916: in assert_called
    raise AssertionError(msg)
E   AssertionError: Expected 'error' to have been called.
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:27:56 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:27:56 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:27:56 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: user
2025-07-04 08:27:56 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: user
2025-07-04 08:27:56 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "user", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:27:56.885425"}
2025-07-04 08:27:56 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "user", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:27:56.885425"}
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
ERROR    helpers.database_helper.DatabaseHelper:database_helper.py:64 Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
WARNING  inventory.services.user_service:user_service.py:127 Autenticacin fallida para usuario: user
WARNING  inventory.system:logging_helper.py:190 AUTH_ATTEMPT: {"username": "user", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:27:56.885425"}
________ TestUserServiceOptimization.test_fase3_pattern_implementation ________
tests\optimization\test_user_service_optimization.py:58: in test_fase3_pattern_implementation
    self.assertIsInstance(self.user_service.db_helper, DatabaseHelper)
E   AssertionError: <helpers.database_helper.DatabaseHelper object at 0x000002361FBB4D10> is not an instance of <class 'src.helpers.database_helper.DatabaseHelper'>
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
__________ TestUserServiceOptimization.test_get_user_by_id_optimized __________
tests\optimization\test_user_service_optimization.py:194: in test_get_user_by_id_optimized
    self.assertIsInstance(result, Usuario)
E   AssertionError: Usuario(id_usuario=1, nombre_usuario='admin', rol='ADMIN', activo=True) is not an instance of <class 'src.models.usuario.Usuario'>
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
DEBUG    inventory.services.user_service:user_service.py:249 Usuario encontrado por ID: 1
________ TestUserServiceOptimization.test_get_users_by_role_new_method ________
tests\optimization\test_user_service_optimization.py:253: in test_get_users_by_role_new_method
    self.assertTrue(all(isinstance(user, Usuario) for user in result))
E   AssertionError: False is not true
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
DEBUG    inventory.services.user_service:user_service.py:541 Obtenidos 2 usuarios con rol ADMIN
________ TestUserServiceOptimization.test_security_validations_robust _________
tests\optimization\test_user_service_optimization.py:157: in test_security_validations_robust
    mock_safe_execute.assert_called()
C:\Python312\Lib\unittest\mock.py:916: in assert_called
    raise AssertionError(msg)
E   AssertionError: Expected 'safe_execute' to have been called.
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:27:57 - inventory.services.user_service - WARNING - authenticate:89 - Intento de autenticacin con username invlido: admin'; DROP TABLE usuarios; -
2025-07-04 08:27:57 - inventory.services.user_service - WARNING - authenticate:89 - Intento de autenticacin con username invlido: admin'; DROP TABLE usuarios; -
2025-07-04 08:27:57 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin'; DROP TABLE usuarios; -", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:27:57.016067"}
2025-07-04 08:27:57 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin'; DROP TABLE usuarios; -", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:27:57.016067"}
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
WARNING  inventory.services.user_service:user_service.py:89 Intento de autenticacin con username invlido: admin'; DROP TABLE usuarios; -
WARNING  inventory.system:logging_helper.py:190 AUTH_ATTEMPT: {"username": "admin'; DROP TABLE usuarios; -", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:27:57.016067"}
_______ TestUserServiceSecurityEnhancements.test_authentication_logging _______
tests\optimization\test_user_service_optimization.py:365: in test_authentication_logging
    mock_log_auth.assert_called_with('testuser', False)
C:\Python312\Lib\unittest\mock.py:938: in assert_called_with
    raise AssertionError(error_message)
E   AssertionError: expected call not found.
E   Expected: log_authentication_attempt('testuser', False)
E     Actual: not called.
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:27:57 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: testuser
2025-07-04 08:27:57 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: testuser
2025-07-04 08:27:57 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "testuser", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:27:57.108641"}
2025-07-04 08:27:57 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "testuser", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:27:57.108641"}
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
WARNING  inventory.services.user_service:user_service.py:127 Autenticacin fallida para usuario: testuser
WARNING  inventory.system:logging_helper.py:190 AUTH_ATTEMPT: {"username": "testuser", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:27:57.108641"}
______ TestLabelServiceFASE3Optimization.test_audit_trail_for_operations ______
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
__ TestLabelServiceFASE3Optimization.test_backward_compatibility_maintained ___
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
____ TestLabelServiceFASE3Optimization.test_cache_management_with_logging _____
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
__ TestLabelServiceFASE3Optimization.test_create_product_label_with_logging ___
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
_ TestLabelServiceFASE3Optimization.test_error_handling_with_structured_logging _
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
_ TestLabelServiceFASE3Optimization.test_format_barcode_uses_validation_helper _
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
_ TestLabelServiceFASE3Optimization.test_generate_barcode_image_with_validation _
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
________ TestLabelServiceFASE3Optimization.test_initialization_logging ________
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
_______ TestLabelServiceFASE3Optimization.test_performance_improvements _______
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
_ TestLabelServiceFASE3Optimization.test_search_product_by_code_performance_logging _
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
_____ TestLabelServiceFASE3Optimization.test_service_has_fase3_components _____
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
__ TestLabelServiceFASE3Optimization.test_templates_functionality_preserved ___
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
_ TestLabelServiceFASE3Optimization.test_validate_barcode_uses_validation_helper _
tests\services\test_label_service_fase3_optimization.py:49: in setUp
    self.label_service = LabelService(
E   TypeError: LabelService.__init__() got an unexpected keyword argument 'db_connection'
__ TestLabelServiceIntegrationFASE3.test_full_workflow_with_fase3_components __
tests\services\test_label_service_fase3_optimization.py:358: in setUp
    self.label_service = LabelService(self.mock_db)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LabelService.__init__() takes 1 positional argument but 2 were given
_ TestReportServiceAuxiliaryMethods.test_auxiliary_methods_return_reportlab_compatible_elements _
tests\services\test_report_service_auxiliary_methods.py:420: in test_auxiliary_methods_return_reportlab_compatible_elements
    result = method_call()
             ^^^^^^^^^^^^^
tests\services\test_report_service_auxiliary_methods.py:408: in <lambda>
    ('movements_table', lambda: self.report_service._build_movements_table(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_movements_table'
__ TestReportServiceAuxiliaryMethods.test_build_inventory_table_calculations __
tests\services\test_report_service_auxiliary_methods.py:242: in test_build_inventory_table_calculations
    result = self.report_service._build_inventory_table(self.sample_inventory_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_inventory_table'
___ TestReportServiceAuxiliaryMethods.test_build_inventory_table_empty_data ___
tests\services\test_report_service_auxiliary_methods.py:390: in test_build_inventory_table_empty_data
    result = self.report_service._build_inventory_table([])
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_inventory_table'
_ TestReportServiceAuxiliaryMethods.test_build_inventory_table_with_zero_stock _
tests\services\test_report_service_auxiliary_methods.py:217: in test_build_inventory_table_with_zero_stock
    result = self.report_service._build_inventory_table(self.sample_inventory_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_inventory_table'
_ TestReportServiceAuxiliaryMethods.test_build_movements_table_data_integrity _
tests\services\test_report_service_auxiliary_methods.py:194: in test_build_movements_table_data_integrity
    result = self.report_service._build_movements_table(self.sample_movements_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_movements_table'
___ TestReportServiceAuxiliaryMethods.test_build_movements_table_empty_data ___
tests\services\test_report_service_auxiliary_methods.py:370: in test_build_movements_table_empty_data
    result = self.report_service._build_movements_table([])
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_movements_table'
___ TestReportServiceAuxiliaryMethods.test_build_movements_table_structure ____
tests\services\test_report_service_auxiliary_methods.py:161: in test_build_movements_table_structure
    result = self.report_service._build_movements_table(self.sample_movements_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_movements_table'
_ TestReportServiceAuxiliaryMethods.test_build_profitability_metrics_calculations _
tests\services\test_report_service_auxiliary_methods.py:348: in test_build_profitability_metrics_calculations
    result = self.report_service._build_profitability_metrics(test_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_profitability_metrics'
_ TestReportServiceAuxiliaryMethods.test_build_profitability_metrics_comprehensive _
tests\services\test_report_service_auxiliary_methods.py:311: in test_build_profitability_metrics_comprehensive
    result = self.report_service._build_profitability_metrics(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_profitability_metrics'
__ TestReportServiceAuxiliaryMethods.test_build_sales_summary_comprehensive ___
tests\services\test_report_service_auxiliary_methods.py:261: in test_build_sales_summary_comprehensive
    result = self.report_service._build_sales_summary(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_sales_summary'
__ TestReportServiceAuxiliaryMethods.test_build_sales_summary_tax_breakdown ___
tests\services\test_report_service_auxiliary_methods.py:290: in test_build_sales_summary_tax_breakdown
    result = self.report_service._build_sales_summary(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_sales_summary'
______ TestReportServiceAuxiliaryMethods.test_table_styling_consistency _______
tests\services\test_report_service_auxiliary_methods.py:443: in test_table_styling_consistency
    movements_result = self.report_service._build_movements_table(self.sample_movements_data)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ReportService' object has no attribute '_build_movements_table'
_________ TestReportServiceFASE3.test_database_helper_complex_queries _________
tests\services\test_report_service_fase3.py:375: in test_database_helper_complex_queries
    report_service = ReportService(
E   TypeError: ReportService.__init__() takes 2 positional arguments but 5 were given
___________ TestReportServiceFASE3.test_error_handling_with_logging ___________
tests\services\test_report_service_fase3.py:404: in test_error_handling_with_logging
    report_service = ReportService(
E   TypeError: ReportService.__init__() takes 2 positional arguments but 5 were given
___________ TestReportServiceFASE3.test_inventory_report_generation ___________
tests\services\test_report_service_fase3.py:166: in test_inventory_report_generation
    report_service = ReportService(
E   TypeError: ReportService.__init__() takes 2 positional arguments but 5 were given
___________ TestReportServiceFASE3.test_movements_report_generation ___________
tests\services\test_report_service_fase3.py:107: in test_movements_report_generation
    report_service = ReportService(
E   TypeError: ReportService.__init__() takes 2 positional arguments but 5 were given
___ TestReportServiceFASE3.test_parameter_validation_with_validation_helper ___
tests\services\test_report_service_fase3.py:345: in test_parameter_validation_with_validation_helper
    report_service = ReportService(
E   TypeError: ReportService.__init__() takes 2 positional arguments but 5 were given
__________ TestReportServiceFASE3.test_pdf_output_format_validation ___________
tests\services\test_report_service_fase3.py:466: in test_pdf_output_format_validation
    report_service = ReportService(
E   TypeError: ReportService.__init__() takes 2 positional arguments but 5 were given
_______________ TestReportServiceFASE3.test_performance_logging _______________
tests\services\test_report_service_fase3.py:435: in test_performance_logging
    report_service = ReportService(
E   TypeError: ReportService.__init__() takes 2 positional arguments but 5 were given
_________ TestReportServiceFASE3.test_profitability_report_generation _________
tests\services\test_report_service_fase3.py:284: in test_profitability_report_generation
    report_service = ReportService(
E   TypeError: ReportService.__init__() takes 2 positional arguments but 5 were given
_______ TestReportServiceFASE3.test_report_service_initialization_fase3 _______
tests\services\test_report_service_fase3.py:82: in test_report_service_initialization_fase3
    report_service = ReportService(
E   TypeError: ReportService.__init__() got an unexpected keyword argument 'db_connection'
_________ TestReportServiceFASE3.test_sales_report_with_tax_breakdown _________
tests\services\test_report_service_fase3.py:224: in test_sales_report_with_tax_breakdown
    report_service = ReportService(
E   TypeError: ReportService.__init__() takes 2 positional arguments but 5 were given
____________ TestAuthenticationFlow.test_correct_application_flow _____________
tests\test_authentication_flow.py:202: in test_correct_application_flow
    main_window = MainWindow(self.root_mock, mock_db.return_value)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MainWindow.__init__() takes 1 positional argument but 3 were given
_______ TestAuthenticationFlow.test_login_window_authentication_failure _______
tests\test_authentication_flow.py:152: in test_login_window_authentication_failure
    login_window = LoginWindow(success_callback)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LoginWindow.__init__() takes 1 positional argument but 2 were given
_______ TestAuthenticationFlow.test_login_window_authentication_success _______
tests\test_authentication_flow.py:108: in test_login_window_authentication_success
    login_window = LoginWindow(success_callback)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LoginWindow.__init__() takes 1 positional argument but 2 were given
_______ TestAuthenticationFlow.test_main_window_requires_authentication _______
tests\test_authentication_flow.py:47: in test_main_window_requires_authentication
    MainWindow(self.root_mock)
E   TypeError: MainWindow.__init__() takes 1 positional argument but 2 were given
______ TestAuthenticationFlow.test_main_window_works_with_authentication ______
tests\test_authentication_flow.py:77: in test_main_window_works_with_authentication
    main_window = MainWindow(self.root_mock, mock_db.return_value)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MainWindow.__init__() takes 1 positional argument but 3 were given

During handling of the above exception, another exception occurred:
tests\test_authentication_flow.py:80: in test_main_window_works_with_authentication
    self.fail(f"MainWindow no debera fallar con usuario autenticado: {e}")
E   AssertionError: MainWindow no debera fallar con usuario autenticado: MainWindow.__init__() takes 1 positional argument but 3 were given
_________ TestBarcodeServiceFase3Optimization.test_cache_integration __________
tests\test_barcode_service_fase3_optimization.py:51: in setUp
    with patch('services.barcode_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
____ TestBarcodeServiceFase3Optimization.test_error_handling_with_logging _____
tests\test_barcode_service_fase3_optimization.py:51: in setUp
    with patch('services.barcode_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
__ TestBarcodeServiceFase3Optimization.test_get_barcode_statistics_optimized __
tests\test_barcode_service_fase3_optimization.py:51: in setUp
    with patch('services.barcode_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
______ TestBarcodeServiceFase3Optimization.test_init_uses_fase3_pattern _______
tests\test_barcode_service_fase3_optimization.py:51: in setUp
    with patch('services.barcode_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
_____ TestBarcodeServiceFase3Optimization.test_read_barcode_with_logging ______
tests\test_barcode_service_fase3_optimization.py:51: in setUp
    with patch('services.barcode_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
_ TestBarcodeServiceFase3Optimization.test_search_product_by_code_uses_db_helper _
tests\test_barcode_service_fase3_optimization.py:51: in setUp
    with patch('services.barcode_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
_ TestBarcodeServiceFase3Optimization.test_validate_barcode_uses_validation_helper _
tests\test_barcode_service_fase3_optimization.py:51: in setUp
    with patch('services.barcode_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
_ TestLabelServiceFase3Optimization.test_create_product_label_with_db_helper __
tests\test_barcode_service_fase3_optimization.py:182: in setUp
    with patch('services.label_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.label_service' from 'D:\\inventario_app2\\src\\services\\label_service.py'> does not have the attribute 'DatabaseHelper'
_ TestLabelServiceFase3Optimization.test_generate_barcode_image_with_validation _
tests\test_barcode_service_fase3_optimization.py:182: in setUp
    with patch('services.label_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.label_service' from 'D:\\inventario_app2\\src\\services\\label_service.py'> does not have the attribute 'DatabaseHelper'
___ TestLabelServiceFase3Optimization.test_generate_labels_pdf_with_logging ___
tests\test_barcode_service_fase3_optimization.py:182: in setUp
    with patch('services.label_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.label_service' from 'D:\\inventario_app2\\src\\services\\label_service.py'> does not have the attribute 'DatabaseHelper'
_______ TestLabelServiceFase3Optimization.test_init_uses_fase3_pattern ________
tests\test_barcode_service_fase3_optimization.py:182: in setUp
    with patch('services.label_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.label_service' from 'D:\\inventario_app2\\src\\services\\label_service.py'> does not have the attribute 'DatabaseHelper'
_____ TestLabelServiceFase3Optimization.test_performance_metrics_tracking _____
tests\test_barcode_service_fase3_optimization.py:182: in setUp
    with patch('services.label_service.DatabaseHelper') as mock_db_helper_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.label_service' from 'D:\\inventario_app2\\src\\services\\label_service.py'> does not have the attribute 'DatabaseHelper'
_______ TestUSBHIDIntegration.test_auto_connect_first_device_optimized ________
tests\test_barcode_service_fase3_optimization.py:317: in setUp
    with patch('services.barcode_service.DatabaseHelper'):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
_________ TestUSBHIDIntegration.test_detect_usb_readers_with_logging __________
tests\test_barcode_service_fase3_optimization.py:317: in setUp
    with patch('services.barcode_service.DatabaseHelper'):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
_________ TestUSBHIDIntegration.test_read_with_timeout_and_validation _________
tests\test_barcode_service_fase3_optimization.py:317: in setUp
    with patch('services.barcode_service.DatabaseHelper'):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
______ TestBarcodeSystemIntegration.test_complete_workflow_scan_to_label ______
tests\test_barcode_service_fase3_optimization.py:389: in setUp
    with patch('services.barcode_service.DatabaseHelper'):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
________ TestBarcodeSystemIntegration.test_error_recovery_and_logging _________
tests\test_barcode_service_fase3_optimization.py:389: in setUp
    with patch('services.barcode_service.DatabaseHelper'):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
____ TestBarcodeSystemIntegration.test_performance_optimization_validation ____
tests\test_barcode_service_fase3_optimization.py:389: in setUp
    with patch('services.barcode_service.DatabaseHelper'):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'DatabaseHelper'
_____ TestCategoryLoadingDiagnosis.test_3_category_service_initialization _____
tests\test_category_loading_diagnosis.py:110: in test_3_category_service_initialization
    self.assertTrue(hasattr(service, 'db_helper'))
E   AssertionError: False is not true

During handling of the above exception, another exception occurred:
tests\test_category_loading_diagnosis.py:122: in test_3_category_service_initialization
    self.fail(f"\u274c Test 3 FALL\xd3: Error inicializando CategoryService: {e}")
E   AssertionError: \u274c Test 3 FALL\xd3: Error inicializando CategoryService: False is not true
__________ TestCategoryLoadingDiagnosis.test_5_simulate_form_loading __________
tests\test_category_loading_diagnosis.py:46: in tearDown
    os.unlink(self.db_path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpiug1m0hy.db'
---------------------------- Captured stdout call -----------------------------
\U0001f4ca Simulaci\xf3n formulario - Categor\xedas cargadas: 4\n\u2705 Test 5 PAS\xd3: El formulario deber\xeda cargar categor\xedas correctamente
__ TestClientServiceOptimization.test_client_exists_by_name_case_insensitive __
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_______ TestClientServiceOptimization.test_client_exists_by_name_false ________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
________ TestClientServiceOptimization.test_client_exists_by_name_true ________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
________ TestClientServiceOptimization.test_client_exists_by_ruc_false ________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
________ TestClientServiceOptimization.test_client_exists_by_ruc_true _________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ TestClientServiceOptimization.test_compatibility_with_existing_interface ___
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ TestClientServiceOptimization.test_create_client_duplicate_name_should_fail _
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ TestClientServiceOptimization.test_create_client_duplicate_ruc_should_fail __
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
___ TestClientServiceOptimization.test_create_client_empty_name_should_fail ___
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__ TestClientServiceOptimization.test_create_client_invalid_ruc_should_fail ___
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_________ TestClientServiceOptimization.test_create_client_valid_data _________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_ TestClientServiceOptimization.test_create_client_whitespace_name_should_fail _
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
________ TestClientServiceOptimization.test_create_client_without_ruc _________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
___________ TestClientServiceOptimization.test_data_cleaning_nombre ___________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____________ TestClientServiceOptimization.test_data_cleaning_ruc _____________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ TestClientServiceOptimization.test_database_connection_error_handling ____
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__________ TestClientServiceOptimization.test_get_all_clients_empty ___________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
____ TestClientServiceOptimization.test_get_all_clients_including_inactive ____
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_______ TestClientServiceOptimization.test_get_all_clients_only_active ________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
________ TestClientServiceOptimization.test_get_all_clients_with_data _________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
________ TestClientServiceOptimization.test_get_client_by_id_existing _________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_______ TestClientServiceOptimization.test_get_client_by_id_nonexistent _______
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
__________ TestClientServiceOptimization.test_return_types_unchanged __________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
______ TestClientServiceOptimization.test_ruc_validation_boundary_values ______
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
______ TestClientServiceOptimization.test_ruc_validation_maximum_length _______
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
______ TestClientServiceOptimization.test_ruc_validation_minimum_length _______
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_________ TestClientServiceOptimization.test_sql_injection_protection _________
tests\test_client_service_optimization.py:52: in setUp
    self.db_connection.connect()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DatabaseConnection' object has no attribute 'connect'
_______ TestClientServiceWithMocks.test_create_client_with_mock_success _______
tests\test_client_service_optimization.py:460: in test_create_client_with_mock_success
    self.assertIsInstance(cliente, Cliente)
E   AssertionError: Cliente(id_cliente=1, nombre='Cliente Mock', ruc='8-123-4567', activo=True) is not an instance of <class 'src.models.cliente.Cliente'>
______ TestClientServiceWithMocks.test_get_client_by_id_with_mock_found _______
tests\test_client_service_optimization.py:489: in test_get_client_by_id_with_mock_found
    self.assertIsInstance(cliente, Cliente)
E   AssertionError: Cliente(id_cliente=1, nombre='Cliente Mock', ruc='8-123-4567', activo=True) is not an instance of <class 'src.models.cliente.Cliente'>
__________ TestCompanyServiceBasic.test_company_backup_functionality __________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
__________ TestCompanyServiceBasic.test_company_configuration_export __________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
__________ TestCompanyServiceBasic.test_company_configuration_import __________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
____________ TestCompanyServiceBasic.test_company_data_persistence ____________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
_________ TestCompanyServiceBasic.test_company_restore_functionality __________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
____________ TestCompanyServiceBasic.test_company_service_logging _____________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
_________________ TestCompanyServiceBasic.test_error_handling _________________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
____________ TestCompanyServiceBasic.test_generate_company_report _____________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
_______ TestCompanyServiceBasic.test_get_company_for_ticket_generation ________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
____________ TestCompanyServiceBasic.test_get_company_info_success ____________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
_____________ TestCompanyServiceBasic.test_service_initialization _____________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
__________ TestCompanyServiceBasic.test_update_company_info_success ___________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
__________ TestCompanyServiceBasic.test_update_company_partial_data ___________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
_________ TestCompanyServiceBasic.test_validate_company_data_invalid __________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
__________ TestCompanyServiceBasic.test_validate_company_data_valid ___________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
_____________ TestCompanyServiceBasic.test_validate_email_format ______________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
______________ TestCompanyServiceBasic.test_validate_ruc_format _______________
tests\test_company_service_basic.py:82: in setUp
    self.mock_database.connect.return_value = True
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:658: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'connect'
________ TestCompanyServiceIntegration.test_integration_with_database _________
tests\test_company_service_basic.py:422: in setUp
    self.database = DatabaseConnection()
                    ^^^^^^^^^^^^^^^^^^^^
E   TypeError: DatabaseConnection.__init__() missing 1 required positional argument: 'db_path'
_____ TestCompanyServiceIntegration.test_integration_with_ticket_service ______
tests\test_company_service_basic.py:422: in setUp
    self.database = DatabaseConnection()
                    ^^^^^^^^^^^^^^^^^^^^
E   TypeError: DatabaseConnection.__init__() missing 1 required positional argument: 'db_path'
__________ TestCompanyServiceBasic.test_backup_restore_functionality __________
tests\test_company_service_basic_fixed.py:183: in setUp
    self.company_service = CompanyService(self.db_connection)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CompanyService.__new__() takes 1 positional argument but 2 were given
---------------------------- Captured stdout setup ----------------------------
\n\U0001f9ea === TESTS B\xc1SICOS COMPANY SERVICE (CORREGIDO) ===\n\U0001f4e6 Imports disponibles: True\n\U0001f4c1 Base de datos temporal: C:\\Users\\domin\\AppData\\Local\\Temp\\tmphsknri92.db
__________ TestCompanyServiceBasic.test_export_import_configuration ___________
tests\test_company_service_basic_fixed.py:183: in setUp
    self.company_service = CompanyService(self.db_connection)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CompanyService.__new__() takes 1 positional argument but 2 were given
_______ TestCompanyServiceBasic.test_get_company_for_ticket_generation ________
tests\test_company_service_basic_fixed.py:183: in setUp
    self.company_service = CompanyService(self.db_connection)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CompanyService.__new__() takes 1 positional argument but 2 were given
____________ TestCompanyServiceBasic.test_get_company_info_success ____________
tests\test_company_service_basic_fixed.py:183: in setUp
    self.company_service = CompanyService(self.db_connection)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CompanyService.__new__() takes 1 positional argument but 2 were given
_____________ TestCompanyServiceBasic.test_service_initialization _____________
tests\test_company_service_basic_fixed.py:183: in setUp
    self.company_service = CompanyService(self.db_connection)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CompanyService.__new__() takes 1 positional argument but 2 were given
__________ TestCompanyServiceBasic.test_update_company_info_success ___________
tests\test_company_service_basic_fixed.py:183: in setUp
    self.company_service = CompanyService(self.db_connection)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CompanyService.__new__() takes 1 positional argument but 2 were given
_________ TestCompanyServiceBasic.test_validate_company_data_invalid __________
tests\test_company_service_basic_fixed.py:183: in setUp
    self.company_service = CompanyService(self.db_connection)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CompanyService.__new__() takes 1 positional argument but 2 were given
__________ TestCompanyServiceBasic.test_validate_company_data_valid ___________
tests\test_company_service_basic_fixed.py:183: in setUp
    self.company_service = CompanyService(self.db_connection)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CompanyService.__new__() takes 1 positional argument but 2 were given
_____________ TestCompanyServiceBasic.test_validate_email_format ______________
tests\test_company_service_basic_fixed.py:183: in setUp
    self.company_service = CompanyService(self.db_connection)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CompanyService.__new__() takes 1 positional argument but 2 were given
______________ TestCompanyServiceBasic.test_validate_ruc_format _______________
tests\test_company_service_basic_fixed.py:183: in setUp
    self.company_service = CompanyService(self.db_connection)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CompanyService.__new__() takes 1 positional argument but 2 were given
_ TestDatabaseConnectionCriticalFixes.test_database_connection_compatible_with_main _
tests\test_critical_fixes.py:57: in test_database_connection_compatible_with_main
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_ TestDatabaseConnectionCriticalFixes.test_database_connection_constructor_accepts_db_path _
tests\test_critical_fixes.py:38: in test_database_connection_constructor_accepts_db_path
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_ TestDatabaseConnectionCriticalFixes.test_database_connection_has_required_methods _
tests\test_critical_fixes.py:47: in test_database_connection_has_required_methods
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
___ TestMainWindowCriticalFixes.test_main_window_constructor_compatibility ____
tests\test_critical_fixes.py:121: in test_main_window_constructor_compatibility
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_______________ TestSyntaxErrorFixes.test_main_window_compiles ________________
tests\test_critical_fixes.py:191: in test_main_window_compiles
    py_compile.compile(main_window_path, doraise=True)
C:\Python312\Lib\py_compile.py:142: in compile
    source_bytes = loader.get_data(file)
                   ^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:1186: in get_data
    ???
E   FileNotFoundError: [Errno 2] No such file or directory: 'D:\\inventario_app2\\ui\\main\\main_window.py'
_______________ TestSyntaxErrorFixes.test_product_form_compiles _______________
tests\test_critical_fixes.py:163: in test_product_form_compiles
    py_compile.compile(product_form_path, doraise=True)
C:\Python312\Lib\py_compile.py:142: in compile
    source_bytes = loader.get_data(file)
                   ^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:1186: in get_data
    ???
E   FileNotFoundError: [Errno 2] No such file or directory: 'D:\\inventario_app2\\ui\\forms\\product_form.py'
___________ TestIntegrationCriticalFixes.test_main_flow_integration ___________
tests\test_critical_fixes.py:225: in test_main_flow_integration
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)

During handling of the above exception, another exception occurred:
tests\test_critical_fixes.py:258: in test_main_flow_integration
    self.fail(f"Integration test failed: {e}")
E   AssertionError: Integration test failed: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
____ TestDatabaseConnectionEvaluation.test_main_py_initialization_pattern _____
tests\test_database_connection_evaluation.py:233: in test_main_py_initialization_pattern
    self.assertIn('from db.database import initialize_database', main_content)
E   AssertionError: 'from db.database import initialize_database' not found in '"""\nPunto de entrada principal para el sistema de gestin de inventario.\n\nFecha: 30/06/2025\nRuta: D:/inventario_app2/main.py\nEstado: CORREGIDO - Inconsistencia MainWindow solucionada\n"""\nimport os\nimport sys\nimport logging\nimport configparser\nfrom tkinter import messagebox\n\n# Agregar src/ al path para imports correctos\nsys.path.insert(0, os.path.join(os.path.dirname(__file__), \'src\'))\n\n# Configurar logging\nlog_dir = os.path.join(os.path.dirname(__file__), \'logs\')\nif not os.path.exists(log_dir):\n    os.makedirs(log_dir)\n\nlogging.basicConfig(\n    filename=os.path.join(log_dir, \'inventario_sistema.log\'),\n    level=logging.INFO,\n    format=\'%(asctime)s - %(name)s - %(levelname)s - %(message)s\'\n)\nlogger = logging.getLogger(__name__)\n\n# Importar mdulos necesarios con paths corregidos\ntry:\n    from db.database import get_database_connection, initialize_database\n    from ui.auth.login_window import LoginWindow\n    from ui.main.main_window import start_main_window\n    \n    logger.info("Mdulos importados correctamente")\nexcept ImportError as e:\n    logger.critical(f"Error al importar mdulos: {e}")\n    messagebox.showerror("Error de Sistema", f"Error al importar mdulos: {e}")\n    exit(1)\n\ndef setup_configuration():\n    """\n    Carga la configuracin del programa desde un archivo config.ini.\n    """\n    config = configparser.ConfigParser()\n    \n    # Verificar que existe el directorio config\n    config_dir = os.path.join(os.path.dirname(__file__), \'config\')\n    if not os.path.exists(config_dir):\n        logger.info("Creando directorio \'config\'...")\n        os.makedirs(config_dir)\n        \n    # Verificar que existe config.ini\n    config_path = os.path.join(config_dir, \'config.ini\')\n    if not os.path.exists(config_path):\n        logger.warning("Archivo config.ini no encontrado. Creando valores por defecto.")\n        # Crear config.ini con valores por defecto\n        config[\'database\'] = {\n            \'db_type\': \'sqlite\',\n            \'db_name\': \'inventario.db\',\n            \'db_host\': \'localhost\',\n            \'db_user\': \'root\',\n            \'db_password\': \'\'\n        }\n        config[\'paths\'] = {\n            \'reports\': \'./data/reports/\'\n        }\n        config[\'monetary\'] = {\n            \'currency_symbol\': \'B/.\',\n            \'decimal_places\': \'2\',\n            \'use_locale\': \'True\'\n        }\n        \n        with open(config_path, \'w\') as configfile:\n            config.write(configfile)\n            logger.info(f"Creado archivo de configuracin: {config_path}")\n    else:\n        config.read(config_path)\n\n    # Configuracin de la base de datos\n    db_config = {\n        \'db_type\': config.get(\'database\', \'db_type\', fallback=\'sqlite\'),\n        \'db_name\': config.get(\'database\', \'db_name\', fallback=\'inventario.db\'),\n        \'db_host\': config.get(\'database\', \'db_host\', fallback=\'localhost\'),\n        \'db_user\': config.get(\'database\', \'db_user\', fallback=\'root\'),\n        \'db_password\': config.get(\'database\', \'db_password\', fallback=\'\')\n    }\n    \n    # Configuracin monetaria\n    monetary_config = {\n        \'currency_symbol\': config.get(\'monetary\', \'currency_symbol\', fallback=\'B/.\'),\n        \'decimal_places\': config.getint(\'monetary\', \'decimal_places\', fallback=2),\n        \'use_locale\': config.getboolean(\'monetary\', \'use_locale\', fallback=True)\n    }\n\n    return db_config, monetary_config\n\ndef initialize_system():\n    """\n    Inicializar sistema completo incluyendo base de datos.\n    """\n    try:\n        # Cargar configuracin\n        db_config, monetary_config = setup_configuration()\n        logger.info("Configuracin cargada exitosamente")\n        \n        # Obtener ruta completa de la base de datos\n        db_path = os.path.join(os.path.dirname(__file__), db_config[\'db_name\'])\n        \n        # Verificar si la base de datos existe, si no, crearla\n        if not os.path.exists(db_path):\n            logger.info(f"Base de datos no existe. Creando: {db_path}")\n            db_connection = initialize_database(db_path)\n            logger.info("Base de datos inicializada con schema y datos por defecto")\n        else:\n            logger.info(f"Conectando a base de datos existente: {db_path}")\n            db_connection = get_database_connection(db_path)\n        \n        # Verificar integridad de la base de datos\n        if not db_connection.verify_schema_integrity():\n            logger.warning("Problemas de integridad en la base de datos")\n            messagebox.showwarning("Advertencia", \n                                 "Se detectaron problemas en la base de datos. "\n                                 "Algunas funciones pueden no trabajar correctamente.")\n        \n        return db_connection, monetary_config\n        \n    except Exception as e:\n        logger.critical(f"Error al inicializar sistema: {e}", exc_info=True)\n        messagebox.showerror("Error del Sistema", \n                           f"No se pudo inicializar el sistema: {e}")\n        raise\n\ndef main():\n    """\n    Funcin principal que inicia la aplicacin.\n    """\n    try:\n        logger.info("=== INICIANDO SISTEMA DE INVENTARIO ===")\n        \n        # Inicializar sistema\n        db_connection, monetary_config = initialize_system()\n        logger.info("Sistema inicializado correctamente")\n        \n        # Mostrar ventana de login\n        login_window = LoginWindow()\n        login_success = login_window.show()\n        \n        if login_success:\n            logger.info("Login exitoso, iniciando ventana principal")\n            \n            # Iniciar ventana principal (MainWindow maneja su propia instancia de Tk)\n            main_window = start_main_window()\n            logger.info("Aplicacin iniciada correctamente")\n        else:\n            logger.info("Login cancelado o fallido")\n            return\n        \n    except Exception as e:\n        logger.critical(f"Error crtico en la aplicacin: {e}", exc_info=True)\n        messagebox.showerror("Error Crtico", \n                           f"Error crtico en la aplicacin: {e}")\n        sys.exit(1)\n\nif __name__ == "__main__":\n    main()\n'
______ TestDatabaseConnectionEvaluation.test_user_service_database_usage ______
tests\test_database_connection_evaluation.py:119: in test_user_service_database_usage
    self.assertTrue(hasattr(user_service, 'db'))  # Alias para compatibilidad
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: False is not true
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
________ TestDatabaseConnectionPerformance.test_singleton_performance _________
tests\test_database_connection_evaluation.py:297: in test_singleton_performance
    self.assertLess(avg_subsequent_time, first_connection_time * 0.5,
E   AssertionError: 0.0 not less than 0.0 : El singleton debera mejorar performance de conexiones posteriores
_____________ TestDatabaseIntegration.test_database_initial_data ______________
tests\test_fase2_validation.py:71: in test_database_initial_data
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
____________ TestDatabaseIntegration.test_database_schema_creation ____________
tests\test_fase2_validation.py:47: in test_database_schema_creation
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
___________ TestDatabaseIntegration.test_database_schema_integrity ____________
tests\test_fase2_validation.py:104: in test_database_schema_integrity
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
____________ TestDatabaseIntegration.test_database_version_control ____________
tests\test_fase2_validation.py:94: in test_database_version_control
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_____________ TestProductServiceValidation.test_get_all_products ______________
tests\test_fase2_validation.py:118: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_fase2_validation.py:127: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_________ TestProductServiceValidation.test_product_creation_complete _________
tests\test_fase2_validation.py:118: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_fase2_validation.py:127: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
__________ TestProductServiceValidation.test_product_crud_operations __________
tests\test_fase2_validation.py:118: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_fase2_validation.py:127: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_________ TestProductServiceValidation.test_product_validation_rules __________
tests\test_fase2_validation.py:118: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_fase2_validation.py:127: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
__ TestCategoryServiceValidation.test_category_service_exists_and_functional __
tests\test_fase2_validation.py:264: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_fase2_validation.py:273: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_____ TestClientServiceValidation.test_client_service_basic_functionality _____
tests\test_fase2_validation.py:307: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_fase2_validation.py:316: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_________ TestSalesServiceValidation.test_sales_service_functionality _________
tests\test_fase2_validation.py:350: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_fase2_validation.py:359: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
________ TestReportServiceValidation.test_report_service_functionality ________
tests\test_fase2_validation.py:389: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_fase2_validation.py:398: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
__________ TestAuthenticationValidation.test_session_manager_exists ___________
tests\test_fase2_validation.py:461: in test_session_manager_exists
    self.assertTrue(hasattr(session_manager, method))
E   AssertionError: False is not true
_________ TestUserInterfaceValidation.test_main_window_functionality __________
tests\test_fase2_validation.py:487: in test_main_window_functionality
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)

During handling of the above exception, another exception occurred:
tests\test_fase2_validation.py:506: in test_main_window_functionality
    self.fail(f"MainWindow test failed: {e}")
E   AssertionError: MainWindow test failed: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
__________ TestSystemIntegrationFlow.test_complete_application_flow ___________
tests\test_fase2_validation.py:562: in test_complete_application_flow
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)

During handling of the above exception, another exception occurred:
tests\test_fase2_validation.py:583: in test_complete_application_flow
    self.fail(f"Application flow test failed: {e}")
E   AssertionError: Application flow test failed: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
______ TestSystemIntegrationFlow.test_product_creation_to_inventory_flow ______
tests\test_fase2_validation.py:587: in test_product_creation_to_inventory_flow
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
____ TestFase3QueryOptimization.test_avoid_count_star_in_existence_checks _____
tests\test_fase3_optimization.py:126: in test_avoid_count_star_in_existence_checks
    product_service._product_exists_safe("test")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ProductService' object has no attribute '_product_exists_safe'. Did you mean: '_product_exists_by_name'?
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
________ TestFase3QueryOptimization.test_category_existence_optimized _________
tests\test_fase3_optimization.py:115: in test_category_existence_optimized
    self.assertTrue(optimized, "Consultas de categora deben estar optimizadas")
E   AssertionError: False is not true : Consultas de categora deben estar optimizadas
________ TestFase3QueryOptimization.test_existence_check_uses_limit_1 _________
tests\test_fase3_optimization.py:81: in test_existence_check_uses_limit_1
    result = product_service._product_exists_safe("test_product")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ProductService' object has no attribute '_product_exists_safe'. Did you mean: '_product_exists_by_name'?
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
___________ TestFase3CodeDeduplication.test_row_to_dict_centralized ___________
tests\test_fase3_optimization.py:178: in test_row_to_dict_centralized
    self.assertTrue(
E   AssertionError: False is not true : Debe existir mtodo centralizado para convertir Row a dict
____ TestFase3CodeDeduplication.test_services_use_common_validation_helper ____
tests\test_fase3_optimization.py:165: in test_services_use_common_validation_helper
    self.assertTrue(hasattr(ValidationHelper, 'validate_required_field'))
E   AssertionError: False is not true
__ TestFase3LoggingImprovement.test_logging_helper_provides_standard_logger ___
tests\test_fase3_optimization.py:197: in test_logging_helper_provides_standard_logger
    self.assertTrue(hasattr(LoggingHelper, 'get_logger'))
E   AssertionError: False is not true
_______ TestFase3DocumentationUpdate.test_changelog_updated_for_phase3 ________
tests\test_fase3_optimization.py:312: in test_changelog_updated_for_phase3
    self.assertTrue(os.path.exists(changelog_file), "Changelog debe existir")
E   AssertionError: False is not true : Changelog debe existir
________ TestFase3DocumentationUpdate.test_inventory_directory_updated ________
tests\test_fase3_optimization.py:298: in test_inventory_directory_updated
    self.assertTrue(os.path.exists(directory_file), "Archivo de directorio debe existir")
E   AssertionError: False is not true : Archivo de directorio debe existir
_ TestFase3IntegrationValidation.test_product_service_still_functional_after_optimization _
tests\test_fase3_optimization.py:346: in test_product_service_still_functional_after_optimization
    result = product_service.create_product(
src\services\product_service.py:124: in create_product
    raise ValueError(f"No existe la categora con ID {id_categoria}")
E   ValueError: No existe la categora con ID 1

During handling of the above exception, another exception occurred:
tests\test_fase3_optimization.py:358: in test_product_service_still_functional_after_optimization
    self.fail(f"ProductService fall despus de optimizaciones: {e}")
E   AssertionError: ProductService fall despus de optimizaciones: No existe la categora con ID 1
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:04 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:04 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:04 - inventory.services.product_service - ERROR - log_error_with_context:235 - ERROR_WITH_CONTEXT: {"error_type": "ValueError", "error_message": "No existe la categora con ID 1", "timestamp": "2025-07-04T08:28:04.173106", "context": {"operation": "create_product", "product_name": "Producto Test FASE 3", "operation_time": 0.0}}
2025-07-04 08:28:04 - inventory.services.product_service - ERROR - log_error_with_context:235 - ERROR_WITH_CONTEXT: {"error_type": "ValueError", "error_message": "No existe la categora con ID 1", "timestamp": "2025-07-04T08:28:04.173106", "context": {"operation": "create_product", "product_name": "Producto Test FASE 3", "operation_time": 0.0}}
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
DEBUG    inventory.services.product_service:product_service.py:601 Verificacin categora 1: no existe
ERROR    inventory.services.product_service:logging_helper.py:235 ERROR_WITH_CONTEXT: {"error_type": "ValueError", "error_message": "No existe la categora con ID 1", "timestamp": "2025-07-04T08:28:04.173106", "context": {"operation": "create_product", "product_name": "Producto Test FASE 3", "operation_time": 0.0}}
___________ TestBarcodeService.test_connect_barcode_device_failure ____________
tests\test_fase4_barcode_functionality.py:44: in setUp
    with patch('services.barcode_service.ProductService') as mock_ps_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
___________ TestBarcodeService.test_connect_barcode_device_success ____________
tests\test_fase4_barcode_functionality.py:44: in setUp
    with patch('services.barcode_service.ProductService') as mock_ps_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
___________________ TestBarcodeService.test_format_barcode ____________________
tests\test_fase4_barcode_functionality.py:44: in setUp
    with patch('services.barcode_service.ProductService') as mock_ps_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
___________ TestBarcodeService.test_lookup_product_by_barcode_found ___________
tests\test_fase4_barcode_functionality.py:44: in setUp
    with patch('services.barcode_service.ProductService') as mock_ps_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
_________ TestBarcodeService.test_lookup_product_by_barcode_not_found _________
tests\test_fase4_barcode_functionality.py:44: in setUp
    with patch('services.barcode_service.ProductService') as mock_ps_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
________________ TestBarcodeService.test_read_barcode_success _________________
tests\test_fase4_barcode_functionality.py:44: in setUp
    with patch('services.barcode_service.ProductService') as mock_ps_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
________________ TestBarcodeService.test_scan_barcode_devices _________________
tests\test_fase4_barcode_functionality.py:44: in setUp
    with patch('services.barcode_service.ProductService') as mock_ps_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
___________ TestBarcodeService.test_validate_barcode_invalid_codes ____________
tests\test_fase4_barcode_functionality.py:44: in setUp
    with patch('services.barcode_service.ProductService') as mock_ps_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
____________ TestBarcodeService.test_validate_barcode_valid_codes _____________
tests\test_fase4_barcode_functionality.py:44: in setUp
    with patch('services.barcode_service.ProductService') as mock_ps_class:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
______________ TestLabelService.test_create_product_label_basic _______________
tests\test_fase4_barcode_functionality.py:170: in setUp
    self.label_service = LabelService(self.mock_db)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LabelService.__init__() takes 1 positional argument but 2 were given
_________ TestLabelService.test_create_product_label_invalid_product __________
tests\test_fase4_barcode_functionality.py:170: in setUp
    self.label_service = LabelService(self.mock_db)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LabelService.__init__() takes 1 positional argument but 2 were given
__________ TestLabelService.test_generate_barcode_image_invalid_code __________
tests\test_fase4_barcode_functionality.py:170: in setUp
    self.label_service = LabelService(self.mock_db)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LabelService.__init__() takes 1 positional argument but 2 were given
_________ TestLabelService.test_generate_barcode_image_invalid_format _________
tests\test_fase4_barcode_functionality.py:170: in setUp
    self.label_service = LabelService(self.mock_db)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LabelService.__init__() takes 1 positional argument but 2 were given
____________ TestLabelService.test_generate_barcode_image_success _____________
tests\test_fase4_barcode_functionality.py:170: in setUp
    self.label_service = LabelService(self.mock_db)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LabelService.__init__() takes 1 positional argument but 2 were given
________________ TestLabelService.test_get_available_templates ________________
tests\test_fase4_barcode_functionality.py:170: in setUp
    self.label_service = LabelService(self.mock_db)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LabelService.__init__() takes 1 positional argument but 2 were given
____________ TestLabelService.test_validate_template_data_invalid _____________
tests\test_fase4_barcode_functionality.py:170: in setUp
    self.label_service = LabelService(self.mock_db)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LabelService.__init__() takes 1 positional argument but 2 were given
_____________ TestLabelService.test_validate_template_data_valid ______________
tests\test_fase4_barcode_functionality.py:170: in setUp
    self.label_service = LabelService(self.mock_db)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LabelService.__init__() takes 1 positional argument but 2 were given
_____________ TestHardwareDetector.test_detect_usb_devices_no_usb _____________
tests\test_fase4_barcode_functionality.py:389: in test_detect_usb_devices_no_usb
    with patch('utils.hardware_detector.USB_AVAILABLE', False):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'utils.hardware_detector' from 'D:\\inventario_app2\\src\\utils\\hardware_detector.py'> does not have the attribute 'USB_AVAILABLE'
------------------------------ Captured log call ------------------------------
INFO     utils.hardware_detector:hardware_detector.py:127 HardwareDetector inicializado
____________ TestBarcodeIntegration.test_barcode_to_label_workflow ____________
tests\test_fase4_barcode_functionality.py:458: in setUp
    with patch('services.barcode_service.ProductService'):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
_______ TestBarcodeIntegration.test_device_detection_and_configuration ________
tests\test_fase4_barcode_functionality.py:458: in setUp
    with patch('services.barcode_service.ProductService'):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'services.barcode_service' from 'D:\\inventario_app2\\src\\services\\barcode_service.py'> does not have the attribute 'ProductService'
______ TestDeploymentInfrastructure.test_deployment_directory_structure _______
tests\test_fase5_deployment.py:37: in test_deployment_directory_structure
    self.assertTrue(self.deployment_dir.exists(),
E   AssertionError: False is not true : Directorio deployment debe existir
_________ TestDeploymentInfrastructure.test_deployment_scripts_exist __________
tests\test_fase5_deployment.py:83: in test_deployment_scripts_exist
    self.assertTrue(script_path.exists(),
E   AssertionError: False is not true : Script deploy.bat debe existir en scripts/
___________ TestDeploymentInfrastructure.test_installer_files_exist ___________
tests\test_fase5_deployment.py:66: in test_installer_files_exist
    self.assertTrue(file_path.exists(),
E   AssertionError: False is not true : Archivo setup.py debe existir en installer/
________ TestDocumentationComplete.test_technical_documentation_exists ________
tests\test_fase5_deployment.py:124: in test_technical_documentation_exists
    self.assertTrue(doc_path.exists(),
E   AssertionError: False is not true : Documentacin guia_instalacion.md debe existir
___________ TestDocumentationComplete.test_training_materials_exist ___________
tests\test_fase5_deployment.py:130: in test_training_materials_exist
    self.assertTrue(training_dir.exists(),
E   AssertionError: False is not true : Directorio training/ debe existir
______________ TestDocumentationComplete.test_user_manual_exists ______________
tests\test_fase5_deployment.py:103: in test_user_manual_exists
    self.assertTrue(manual_path.exists(),
E   AssertionError: False is not true : Manual de usuario debe existir
__________ TestSystemReadyForProduction.test_database_initialization __________
tests\test_fase5_deployment.py:168: in test_database_initialization
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)

During handling of the above exception, another exception occurred:
tests\test_fase5_deployment.py:192: in test_database_initialization
    self.fail(f"Error al inicializar base de datos: {e}")
E   AssertionError: Error al inicializar base de datos: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
___________________ TestDeploymentAssets.test_readme_exists ___________________
tests\test_fase5_deployment.py:242: in test_readme_exists
    self.assertTrue(readme_path.exists(), "README.md debe existir")
E   AssertionError: False is not true : README.md debe existir
__________ TestValidationHelper.test_validate_decimal_range_invalid ___________
tests\test_helpers_validation.py:205: in test_validate_decimal_range_invalid
    result = self.validator.validate_decimal_range(value, min_val, max_val)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\helpers\validation_helper.py:164: in validate_decimal_range
    decimal_value = Decimal(str(value))
                    ^^^^^^^^^^^^^^^^^^^
E   decimal.InvalidOperation: [<class 'decimal.ConversionSyntax'>]
____________ TestValidationHelper.test_validate_list_items_invalid ____________
tests\test_helpers_validation.py:457: in test_validate_list_items_invalid
    self.assertFalse(self.validator.validate_list_items(items, valid_values))
E   AssertionError: True is not false
_________ TestValidationHelper.test_validate_positive_integer_invalid _________
tests\test_helpers_validation.py:222: in test_validate_positive_integer_invalid
    self.assertFalse(self.validator.validate_positive_integer(value))
E   AssertionError: True is not false
__________ TestValidationHelper.test_validate_username_invalid_cases __________
tests\test_helpers_validation.py:67: in test_validate_username_invalid_cases
    self.assertFalse(self.validator.validate_username(username))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\helpers\validation_helper.py:43: in validate_username
    return bool(self.username_pattern.match(username))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: expected string or bytes-like object, got 'int'
_____________ TestDatabaseHelper.test_row_to_dict_with_sqlite_row _____________
tests\test_helpers_validation.py:682: in test_row_to_dict_with_sqlite_row
    mock_row.__getitem__.side_effect = lambda key: {'id': 1, 'name': 'test'}[key]
    ^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:660: in __getattr__
    raise AttributeError(name)
E   AttributeError: __getitem__
__________________ TestLoggingHelper.test_get_log_statistics __________________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpt557lnt8\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:940: in test_get_log_statistics
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpt557lnt8\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
__________________ TestLoggingHelper.test_get_service_logger __________________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp3xnpeb1j\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:739: in test_get_service_logger
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp3xnpeb1j\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
______________ TestLoggingHelper.test_get_service_logger_cached _______________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp3y2vgeev\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:749: in test_get_service_logger_cached
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp3y2vgeev\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
__________________ TestLoggingHelper.test_get_system_logger ___________________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpfdycn9ch\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:769: in test_get_system_logger
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpfdycn9ch\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
____________________ TestLoggingHelper.test_get_ui_logger _____________________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpbsuvaj_1\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:759: in test_get_ui_logger
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpbsuvaj_1\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
__________ TestLoggingHelper.test_log_authentication_attempt_failure __________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp2f8vebe_\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:813: in test_log_authentication_attempt_failure
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp2f8vebe_\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
__________ TestLoggingHelper.test_log_authentication_attempt_success __________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpmlo_eup6\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:796: in test_log_authentication_attempt_success
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpmlo_eup6\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
_____________ TestLoggingHelper.test_log_business_rule_violation ______________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp3kf6994z\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:899: in test_log_business_rule_violation
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp3kf6994z\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
________________ TestLoggingHelper.test_log_database_operation ________________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmps_97twc7\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:829: in test_log_database_operation
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmps_97twc7\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
________________ TestLoggingHelper.test_log_error_with_context ________________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpdjxma1bk\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:847: in test_log_error_with_context
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpdjxma1bk\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
_____________ TestLoggingHelper.test_log_performance_metrics_fast _____________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp_sbe6_z6\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:867: in test_log_performance_metrics_fast
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp_sbe6_z6\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
_____________ TestLoggingHelper.test_log_performance_metrics_slow _____________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpukymfrc1\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:883: in test_log_performance_metrics_slow
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmpukymfrc1\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
___________________ TestLoggingHelper.test_log_user_action ____________________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp0azuh5lv\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:779: in test_log_user_action
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmp0azuh5lv\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
_________________ TestLoggingHelper.test_setup_logging_basic __________________
C:\Python312\Lib\shutil.py:633: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmplbf8cfh3\\inventory_system.log'

During handling of the above exception, another exception occurred:
tests\test_helpers_validation.py:722: in test_setup_logging_basic
    with tempfile.TemporaryDirectory() as temp_dir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tempfile.py:946: in __exit__
    self.cleanup()
C:\Python312\Lib\tempfile.py:950: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Python312\Lib\tempfile.py:930: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Python312\Lib\shutil.py:781: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\shutil.py:635: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Python312\Lib\tempfile.py:905: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] El proceso no tiene acceso al archivo porque est siendo utilizado por otro proceso: 'C:\\Users\\domin\\AppData\\Local\\Temp\\tmplbf8cfh3\\inventory_system.log'
------------------------------ Captured log call ------------------------------
INFO     inventory.system:logging_helper.py:78 Sistema de logging configurado exitosamente
_________ TestHelpersIntegration.test_logging_with_validation_errors __________
tests\test_helpers_validation.py:1076: in test_logging_with_validation_errors
    mock_warning.assert_called_once()
C:\Python312\Lib\unittest\mock.py:926: in assert_called_once
    raise AssertionError(msg)
E   AssertionError: Expected 'warning' to have been called once. Called 0 times.
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
2025-07-04 08:28:09 - inventory.system - WARNING - log_business_rule_violation:280 - BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
------------------------------ Captured log call ------------------------------
WARNING  inventory.system:logging_helper.py:280 BUSINESS_RULE_VIOLATION: {"rule": "product_validation_failed", "timestamp": "2025-07-04T08:28:09.325534", "details": {"errors": ["El nombre debe tener al menos 3 caracteres", "El precio de venta debe ser mayor a 0", "El precio de compra no puede ser negativo"], "data": {"nombre": "A", "precio_venta": 0, "precio_compra": -10}}}
___________ TestModelsValidation.test_categoria_nombre_constraints ____________
tests\test_models_validation.py:174: in test_categoria_nombre_constraints
    self.assertLessEqual(len(categoria3.nombre), 60)
E   AssertionError: 61 not less than or equal to 60
---------------------------- Captured stdout call -----------------------------
\n3\ufe0f\u20e3 TEST: Categoria - Constraints nombre...
_____________ TestModelsValidation.test_cliente_email_validation ______________
tests\test_models_validation.py:370: in test_cliente_email_validation
    cliente1 = Cliente(nombre='Cliente Email', email='valido@email.com')
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: Cliente.__init__() got an unexpected keyword argument 'email'
---------------------------- Captured stdout call -----------------------------
\n1\ufe0f\u20e31\ufe0f\u20e3 TEST: Cliente - Validaci\xf3n email...
______________ TestModelsValidation.test_cliente_ruc_validation _______________
tests\test_models_validation.py:358: in test_cliente_ruc_validation
    self.assertEqual(cliente3.ruc, '')
E   AssertionError: None != ''
---------------------------- Captured stdout call -----------------------------
\n\U0001f51f TEST: Cliente - Validaci\xf3n RUC...
______________ TestModelsValidation.test_cliente_valid_creation _______________
tests\test_models_validation.py:325: in test_cliente_valid_creation
    cliente = Cliente(
E   TypeError: Cliente.__init__() got an unexpected keyword argument 'telefono'
---------------------------- Captured stdout call -----------------------------
\n9\ufe0f\u20e3 TEST: Cliente - Creaci\xf3n v\xe1lida...
______ TestMovementServiceOptimization.test_fase3_helpers_initialization ______
tests\test_movement_service_optimization.py:60: in test_fase3_helpers_initialization
    self.assertTrue(hasattr(self.service, 'db_helper'))
E   AssertionError: False is not true
________ TestMovementServiceOptimization.test_get_movement_statistics _________
tests\test_movement_service_optimization.py:266: in test_get_movement_statistics
    stats = self.service.get_movement_statistics()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'MovementService' object has no attribute 'get_movement_statistics'
_______ TestMovementServiceOptimization.test_logging_helper_integration _______
tests\test_movement_service_optimization.py:131: in test_logging_helper_integration
    with patch('utils.logging_helper.LoggingHelper.log_operation_start') as mock_log_start, \
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <class 'utils.logging_helper.LoggingHelper'> does not have the attribute 'log_operation_start'
____ TestMovementServiceOptimization.test_movement_creation_optimized_flow ____
tests\test_movement_service_optimization.py:221: in test_movement_creation_optimized_flow
    self.assertIsInstance(movement, Movimiento)
E   AssertionError: Movimiento(id_movimiento=456, id_producto=1, tipo_movimiento='ENTRADA', cantidad=10, fecha_movimiento='2025-07-04 08:28:10.008831', responsable='Admin') is not an instance of <class 'src.models.movimiento.Movimiento'>
---------------------------- Captured stdout call -----------------------------
\u2705 Movimiento creado: ID 456, Producto 1, ENTRADA, Stock: 5 -> 15
_________ TestMovementServiceOptimization.test_new_optimized_methods __________
tests\test_movement_service_optimization.py:175: in test_new_optimized_methods
    self.assertTrue(hasattr(self.service, method_name),
E   AssertionError: False is not true : Nuevo mtodo optimizado get_movement_statistics no encontrado
____ TestMovementServiceOptimization.test_validate_movement_data_optimized ____
tests\test_movement_service_optimization.py:239: in test_validate_movement_data_optimized
    is_valid, errors = self.service.validate_movement_data_optimized(**valid_data)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'MovementService' object has no attribute 'validate_movement_data_optimized'
___ TestProductFormConnection.test_category_service_receives_db_connection ____
tests\test_product_form_connection.py:58: in test_category_service_receives_db_connection
    mock_category.assert_called_once_with(mock_db_instance)
C:\Python312\Lib\unittest\mock.py:958: in assert_called_once_with
    raise AssertionError(msg)
E   AssertionError: Expected 'CategoryService' to be called once. Called 0 times.
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:10 - ProductWindow.2431485787552 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:13 - ProductWindow.2431485787552 - ERROR - _validate_services:160 - ProductService no inicializado
------------------------------ Captured log call ------------------------------
INFO     ProductWindow.2431485787552:product_form.py:64 === INICIANDO ProductWindow con inicializacin corregida ===
INFO     ProductWindow.2431485787552:product_form.py:103 Inicializando servicios...
INFO     ProductWindow.2431485787552:product_form.py:115 Obteniendo conexin a base de datos...
ERROR    ProductWindow.2431485787552:product_form.py:154 Error crtico inicializando servicios: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
ERROR    ProductWindow.2431485787552:product_form.py:173 No se pudo conectar a la base de datos: Conexin de tipo inesperado: <class 'unittest.mock.Mock'>
ERROR    ProductWindow.2431485787552:product_form.py:160 ProductService no inicializado
___ TestProductFormConnection.test_category_service_with_proper_connection ____
tests\test_product_form_connection.py:100: in test_category_service_with_proper_connection
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
______ TestProductFormConnection.test_database_connection_error_handling ______
tests\test_product_form_connection.py:78: in test_database_connection_error_handling
    mock_error.assert_called_once()
C:\Python312\Lib\unittest\mock.py:926: in assert_called_once
    raise AssertionError(msg)
E   AssertionError: Expected 'showerror' to have been called once. Called 2 times.
E   Calls: [call('Error de Conexin', 'No se pudo conectar a la base de datos: Error de conexin'),
E    call('Error Fatal', 'No se pudieron inicializar los servicios necesarios')].
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _initialize_services:154 - Error crtico inicializando servicios: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _show_service_error:173 - No se pudo conectar a la base de datos: Error de conexin
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
2025-07-04 08:28:14 - ProductWindow.2431485777952 - ERROR - _validate_services:160 - ProductService no inicializado
------------------------------ Captured log call ------------------------------
INFO     ProductWindow.2431485777952:product_form.py:64 === INICIANDO ProductWindow con inicializacin corregida ===
INFO     ProductWindow.2431485777952:product_form.py:103 Inicializando servicios...
INFO     ProductWindow.2431485777952:product_form.py:115 Obteniendo conexin a base de datos...
ERROR    ProductWindow.2431485777952:product_form.py:154 Error crtico inicializando servicios: Error de conexin
ERROR    ProductWindow.2431485777952:product_form.py:173 No se pudo conectar a la base de datos: Error de conexin
ERROR    ProductWindow.2431485777952:product_form.py:160 ProductService no inicializado
____ TestProductServiceFase3Optimization.test_all_crud_operations_working _____
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
---------------------------- Captured stdout setup ----------------------------
\n\U0001f527 === OPTIMIZACI\xd3N PRODUCTSERVICE FASE 1 \u2192 FASE 3 ===\n\U0001f4ca Objetivo: Implementar helpers optimizados\n\u26a1 Performance: Mejorar operaciones cr\xedticas\n\U0001f50d Helpers disponibles: True
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
_ TestProductServiceFase3Optimization.test_backward_compatibility_fase1_fase3 _
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
_ TestProductServiceFase3Optimization.test_bulk_operations_performance_fase3 __
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
______ TestProductServiceFase3Optimization.test_business_rules_preserved ______
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
__ TestProductServiceFase3Optimization.test_create_product_performance_fase3 __
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
___ TestProductServiceFase3Optimization.test_database_helper_implementation ___
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
_ TestProductServiceFase3Optimization.test_database_operations_with_db_helper _
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
_ TestProductServiceFase3Optimization.test_integration_with_optimized_services _
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
___ TestProductServiceFase3Optimization.test_logging_helper_implementation ____
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
____ TestProductServiceFase3Optimization.test_logging_with_logging_helper _____
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
_ TestProductServiceFase3Optimization.test_search_products_performance_fase3 __
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
__ TestProductServiceFase3Optimization.test_validation_helper_implementation __
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
_ TestProductServiceFase3Optimization.test_validations_with_validation_helper _
tests\test_product_service_fase3_optimization.py:97: in setUp
    self.categoria_material = self.category_service.create_category({
E   TypeError: CategoryService.create_category() missing 1 required positional argument: 'tipo'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
_ TestProductServiceObjectReturn.test_get_product_by_id_returns_producto_object _
tests\test_product_service_object_return.py:69: in test_get_product_by_id_returns_producto_object
    self.assertIsInstance(result, Producto,
E   AssertionError: None is not an instance of <class 'src.models.producto.Producto'> : get_product_by_id debe devolver objeto Producto, no dict
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
___ TestProductServiceObjectReturn.test_get_product_by_id_with_none_values ____
tests\test_product_service_object_return.py:111: in test_get_product_by_id_with_none_values
    self.assertIsInstance(result, Producto)
E   AssertionError: None is not an instance of <class 'src.models.producto.Producto'>
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
_______ TestProductServiceObjectReturn.test_method_signature_unchanged ________
C:\Python312\Lib\unittest\mock.py:1390: in patched
    with self.decoration_helper(patched,
C:\Python312\Lib\contextlib.py:137: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1372: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\contextlib.py:526: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1461: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\unittest\mock.py:1434: in get_original
    raise AttributeError(
E   AttributeError: <module 'src.services.product_service' from 'D:\\inventario_app2\\src\\services\\product_service.py'> does not have the attribute 'CategoryService'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
___ TestProductServiceObjectReturn.test_object_has_all_required_attributes ____
tests\test_product_service_object_return.py:199: in test_object_has_all_required_attributes
    self.assertTrue(hasattr(product, attr),
E   AssertionError: False is not true : Producto debe tener atributo 'id_producto'
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
________ TestProductServiceObjectReturn.test_sales_form_compatibility _________
tests\test_product_service_object_return.py:157: in test_sales_form_compatibility
    self.assertIsNotNone(product.stock, "product.stock debe ser accesible")
                         ^^^^^^^^^^^^^
E   AttributeError: 'NoneType' object has no attribute 'stock'
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:15 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
_________________ TestReportsFormBasic.test_date_fields_exist _________________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
__________________ TestReportsFormBasic.test_date_validation __________________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
__________________ TestReportsFormBasic.test_error_handling ___________________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
___________ TestReportsFormBasic.test_export_to_excel_functionality ___________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
__________________ TestReportsFormBasic.test_filter_options ___________________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
______________ TestReportsFormBasic.test_form_has_required_tabs _______________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
________________ TestReportsFormBasic.test_form_initialization ________________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
______________ TestReportsFormBasic.test_form_keyboard_shortcuts ______________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
______________ TestReportsFormBasic.test_form_responsive_design _______________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
_________ TestReportsFormBasic.test_generate_inventory_report_failure _________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
_________ TestReportsFormBasic.test_generate_inventory_report_success _________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
_________ TestReportsFormBasic.test_generate_movements_report_success _________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
___________ TestReportsFormBasic.test_generate_sales_report_success ___________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
____________ TestReportsFormBasic.test_progress_bar_functionality _____________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
___________ TestReportsFormBasic.test_report_history_functionality ____________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
___________ TestReportsFormBasic.test_report_preview_functionality ____________
tests\test_reports_form_basic.py:56: in setUp
    self.mock_database = Mock(spec=Database)
                                   ^^^^^^^^
E   NameError: name 'Database' is not defined
_______ TestReportsFormIntegration.test_integration_with_report_service _______
tests\test_reports_form_basic.py:322: in setUp
    self.database = Database()
                    ^^^^^^^^
E   NameError: name 'Database' is not defined
___________ TestReportsFormIntegration.test_real_report_generation ____________
tests\test_reports_form_basic.py:322: in setUp
    self.database = Database()
                    ^^^^^^^^
E   NameError: name 'Database' is not defined
_______ TestReportsSystemOptimization.test_concurrent_report_generation _______
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_______ TestReportsSystemOptimization.test_error_handling_invalid_dates _______
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
______ TestReportsSystemOptimization.test_error_handling_pdf_generation _______
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_______ TestReportsSystemOptimization.test_generate_pdf_report_function _______
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_______ TestReportsSystemOptimization.test_inventory_report_generation ________
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
___________ TestReportsSystemOptimization.test_logging_integration ____________
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
___________ TestReportsSystemOptimization.test_memory_usage_cleanup ___________
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_______ TestReportsSystemOptimization.test_movements_report_generation ________
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_________ TestReportsSystemOptimization.test_pdf_generation_inventory _________
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_________ TestReportsSystemOptimization.test_pdf_generation_movements _________
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_______ TestReportsSystemOptimization.test_pdf_generation_profitability _______
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
___________ TestReportsSystemOptimization.test_pdf_generation_sales ___________
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
________ TestReportsSystemOptimization.test_performance_large_dataset _________
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_____ TestReportsSystemOptimization.test_profitability_report_generation ______
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_ TestReportsSystemOptimization.test_report_service_export_to_pdf_integration _
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
___ TestReportsSystemOptimization.test_report_service_optimization_pattern ____
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_________ TestReportsSystemOptimization.test_sales_report_generation __________
tests\test_reports_system_optimization.py:46: in setUp
    self._insert_test_data()
tests\test_reports_system_optimization.py:147: in _insert_test_data
    venta_id = conn.lastrowid
               ^^^^^^^^^^^^^^
E   AttributeError: 'sqlite3.Connection' object has no attribute 'lastrowid'
_ TestSalesFormCorrection.test_sales_window_initialization_pattern_corrected __
tests\test_sales_form_correction.py:119: in test_sales_window_initialization_pattern_corrected
    sales_window = SalesWindow(mock_parent)
                   ^^^^^^^^^^^^^^^^^^^^^^^^
src\ui\forms\sales_form.py:93: in __init__
    self._create_ui()
src\ui\forms\sales_form.py:110: in _create_ui
    main_frame = ttk.Frame(self.root, padding=10)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\tkinter\ttk.py:713: in __init__
    Widget.__init__(self, master, "ttk::frame", kw)
C:\Python312\Lib\tkinter\ttk.py:527: in __init__
    tkinter.Widget.__init__(self, master, widgetname, kw=kw)
C:\Python312\Lib\tkinter\__init__.py:2653: in __init__
    self._setup(master, cnf)
C:\Python312\Lib\tkinter\__init__.py:2631: in _setup
    count = master._last_child_ids.get(name, 0) + 1
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported operand type(s) for +: 'Mock' and 'int'

During handling of the above exception, another exception occurred:
tests\test_sales_form_correction.py:128: in test_sales_window_initialization_pattern_corrected
    self.fail(f"SalesWindow fall en inicializacin: {e}")
E   AssertionError: SalesWindow fall en inicializacin: unsupported operand type(s) for +: 'Mock' and 'int'
------------------------------ Captured log call ------------------------------
INFO     inventory.services.product_service:product_service.py:63 ProductService inicializado con patrn FASE 3
_____ TestSalesServiceOptimization.test_add_product_to_sale_compatibility _____
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
________ TestSalesServiceOptimization.test_category_type_optimization _________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
__________ TestSalesServiceOptimization.test_centralized_validation ___________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
________ TestSalesServiceOptimization.test_client_exists_optimization _________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_________ TestSalesServiceOptimization.test_create_sale_compatibility _________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
________ TestSalesServiceOptimization.test_error_handling_with_helpers ________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_________ TestSalesServiceOptimization.test_get_all_sales_new_method __________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_______ TestSalesServiceOptimization.test_get_sale_by_id_compatibility ________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
____ TestSalesServiceOptimization.test_get_sales_by_date_range_new_method _____
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
______ TestSalesServiceOptimization.test_get_sales_statistics_new_method ______
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
__________ TestSalesServiceOptimization.test_helpers_initialization ___________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_______ TestSalesServiceOptimization.test_maintains_original_interface ________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
____________ TestSalesServiceOptimization.test_mock_compatibility _____________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_______ TestSalesServiceOptimization.test_optimized_database_operations _______
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
__________ TestSalesServiceOptimization.test_performance_improvement __________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
________ TestSalesServiceOptimization.test_product_exists_optimization ________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_ TestSalesServiceOptimization.test_sales_service_initialization_compatibility _
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
___________ TestSalesServiceOptimization.test_standardized_logging ____________
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_______ TestSalesServiceOptimization.test_validate_sale_data_new_method _______
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
______ TestSalesServiceOptimization.test_validation_rules_compatibility _______
tests\test_sales_service_optimization.py:39: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:48: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
__ TestSalesServiceOptimizationIntegration.test_complete_sale_flow_optimized __
tests\test_sales_service_optimization.py:507: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:516: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
_ TestSalesServiceOptimizationIntegration.test_performance_comparison_with_original _
tests\test_sales_service_optimization.py:507: in setUp
    self.db_connection = self._setup_test_database()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_sales_service_optimization.py:516: in _setup_test_database
    from src.db.database import DatabaseConnectionConnection
E   ImportError: cannot import name 'DatabaseConnectionConnection' from 'src.db.database' (D:\inventario_app2\src\db\database.py)
___________ TestTicketServiceBasic.test_actualizar_pdf_path_success ___________
tests\test_ticket_service_basic.py:535: in test_actualizar_pdf_path_success
    self.assertTrue(result)
E   AssertionError: False is not true
____________ TestTicketServiceBasic.test_eliminar_ticket_no_existe ____________
tests\test_ticket_service_basic.py:667: in test_eliminar_ticket_no_existe
    result = self.ticket_service.eliminar_ticket(999)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'MockTicketService' object has no attribute 'eliminar_ticket'
_____________ TestTicketServiceBasic.test_eliminar_ticket_success _____________
tests\test_ticket_service_basic.py:650: in test_eliminar_ticket_success
    result = self.ticket_service.eliminar_ticket(id_ticket)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'MockTicketService' object has no attribute 'eliminar_ticket'
_____________ TestTicketServiceBasic.test_error_handling_database _____________
tests\test_ticket_service_basic.py:704: in test_error_handling_database
    with self.assertRaises(Exception):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: Exception not raised
__ TestTicketServiceBasic.test_generar_ticket_entrada_movimiento_inexistente __
tests\test_ticket_service_basic.py:369: in test_generar_ticket_entrada_movimiento_inexistente
    with self.assertRaises(ValueError) as context:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: ValueError not raised
_____ TestTicketServiceBasic.test_generar_ticket_entrada_movimiento_venta _____
tests\test_ticket_service_basic.py:385: in test_generar_ticket_entrada_movimiento_venta
    with self.assertRaises(ValueError) as context:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: ValueError not raised
_________ TestTicketServiceBasic.test_generar_ticket_venta_duplicado __________
tests\test_ticket_service_basic.py:320: in test_generar_ticket_venta_duplicado
    with self.assertRaises(ValueError) as context:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: ValueError not raised
_____ TestTicketServiceBasic.test_generar_ticket_venta_venta_inexistente ______
tests\test_ticket_service_basic.py:302: in test_generar_ticket_venta_venta_inexistente
    with self.assertRaises(ValueError) as context:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: ValueError not raised
______ TestTicketServiceBasic.test_obtener_estadisticas_tickets_success _______
tests\test_ticket_service_basic.py:569: in test_obtener_estadisticas_tickets_success
    self.assertEqual(result["VENTA"], 5)
E   AssertionError: 0 != 5
__________ TestTicketServiceBasic.test_obtener_ticket_por_id_success __________
tests\test_ticket_service_basic.py:413: in test_obtener_ticket_por_id_success
    self.assertIsNotNone(result)
E   AssertionError: unexpectedly None
________ TestTicketServiceBasic.test_obtener_tickets_por_fecha_success ________
tests\test_ticket_service_basic.py:686: in test_obtener_tickets_por_fecha_success
    result = self.ticket_service.obtener_tickets_por_fecha(fecha_inicio, fecha_fin)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'MockTicketService' object has no attribute 'obtener_tickets_por_fecha'. Did you mean: 'obtener_tickets_por_venta'?
_____ TestTicketServiceBasic.test_obtener_tickets_por_movimiento_success ______
tests\test_ticket_service_basic.py:477: in test_obtener_tickets_por_movimiento_success
    self.assertEqual(len(result), 1)
E   AssertionError: 0 != 1
________ TestTicketServiceBasic.test_obtener_tickets_por_venta_success ________
tests\test_ticket_service_basic.py:449: in test_obtener_tickets_por_venta_success
    self.assertEqual(len(result), 2)
E   AssertionError: 0 != 2
_________ TestTicketServiceBasic.test_obtener_tickets_sin_pdf_success _________
tests\test_ticket_service_basic.py:631: in test_obtener_tickets_sin_pdf_success
    result = self.ticket_service.obtener_tickets_sin_pdf()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'MockTicketService' object has no attribute 'obtener_tickets_sin_pdf'. Did you mean: 'obtener_ticket_por_id'?
_____ TestTicketServiceBasic.test_obtener_ultimo_ticket_por_tipo_invalido _____
tests\test_ticket_service_basic.py:617: in test_obtener_ultimo_ticket_por_tipo_invalido
    self.ticket_service.obtener_ultimo_ticket_por_tipo("INVALIDO")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'MockTicketService' object has no attribute 'obtener_ultimo_ticket_por_tipo'
_____ TestTicketServiceBasic.test_obtener_ultimo_ticket_por_tipo_success ______
tests\test_ticket_service_basic.py:605: in test_obtener_ultimo_ticket_por_tipo_success
    result = self.ticket_service.obtener_ultimo_ticket_por_tipo(ticket_type)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'MockTicketService' object has no attribute 'obtener_ultimo_ticket_por_tipo'
____________ TestTicketServiceBasic.test_reimprimir_ticket_success ____________
tests\test_ticket_service_basic.py:502: in test_reimprimir_ticket_success
    result = self.ticket_service.reimprimir_ticket(id_ticket_original, generated_by)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_ticket_service_basic.py:95: in reimprimir_ticket
    raise ValueError(f"El ticket con ID {id_ticket} no existe")
E   ValueError: El ticket con ID 1 no existe
____ TestUserServiceOptimization.test_authenticate_maintains_compatibility ____
tests\test_user_service_optimization.py:69: in test_authenticate_maintains_compatibility
    self.assertIsInstance(user, Usuario)
E   AssertionError: None is not an instance of <class 'src.models.usuario.Usuario'>
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
WARNING  inventory.services.user_service:user_service.py:127 Autenticacin fallida para usuario: admin
WARNING  inventory.system:logging_helper.py:190 AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.503023"}
______ TestUserServiceOptimization.test_create_user_with_strong_password ______
tests\test_user_service_optimization.py:116: in test_create_user_with_strong_password
    self.assertIsInstance(user, Usuario)
E   AssertionError: Usuario(id_usuario=5, nombre_usuario='testuser', rol='VENDEDOR', activo=True) is not an instance of <class 'src.models.usuario.Usuario'>
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
INFO     inventory.services.user_service:user_service.py:210 Usuario creado exitosamente: testuser (ID: 5)
INFO     inventory.system:logging_helper.py:215 DB_OPERATION: {"table": "usuarios", "operation": "INSERT", "record_id": 5, "timestamp": "2025-07-04T08:28:22.567504", "details": {"username": "testuser", "role": "VENDEDOR"}}
_________ TestUserServiceOptimization.test_error_handling_improvement _________
tests\test_user_service_optimization.py:233: in test_error_handling_improvement
    mock_log.assert_called()
C:\Python312\Lib\unittest\mock.py:916: in assert_called
    raise AssertionError(msg)
E   AssertionError: Expected 'error' to have been called.
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - ERROR - safe_execute:64 - Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
ERROR    helpers.database_helper.DatabaseHelper:database_helper.py:64 Error ejecutando query: 
                SELECT id_usuario, nombre_usuario, password_hash, rol, activo
                FROM ... - Error: Database error
____________ TestUserServiceOptimization.test_get_user_statistics _____________
tests\test_user_service_optimization.py:145: in test_get_user_statistics
    self.assertIn('by_role', stats)
E   AssertionError: 'by_role' not found in {'total_users': 0, 'active_users': 0, 'admin_count': 0, 'vendor_count': 0, 'inactive_users': 0, 'generated_at': '2025-07-04T08:28:22.648188', 'error': "'NoneType' object is not subscriptable"}
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_user_statistics:591 - Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
ERROR    inventory.services.user_service:user_service.py:591 Error generando estadsticas de usuarios: 'NoneType' object is not subscriptable
_____________ TestUserServiceOptimization.test_get_users_by_role ______________
tests\test_user_service_optimization.py:130: in test_get_users_by_role
    self.assertEqual(len(admins), 2)
E   AssertionError: 0 != 2
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
2025-07-04 08:28:22 - inventory.services.user_service - ERROR - get_users_by_role:545 - Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
ERROR    inventory.services.user_service:user_service.py:545 Error obteniendo usuarios por rol ADMIN: 'NoneType' object is not subscriptable
____________ TestUserServiceOptimization.test_logging_helper_usage ____________
tests\test_user_service_optimization.py:182: in test_logging_helper_usage
    mock_log.assert_called()
C:\Python312\Lib\unittest\mock.py:916: in assert_called
    raise AssertionError(msg)
E   AssertionError: Expected 'info' to have been called.
---------------------------- Captured stderr call -----------------------------
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - helpers.database_helper.DatabaseHelper - WARNING - _row_to_dict:271 - Error convirtiendo row a dict: 'Mock' object is not iterable
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.services.user_service - WARNING - authenticate:127 - Autenticacin fallida para usuario: admin
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
2025-07-04 08:28:22 - inventory.system - WARNING - log_authentication_attempt:190 - AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
WARNING  helpers.database_helper.DatabaseHelper:database_helper.py:271 Error convirtiendo row a dict: 'Mock' object is not iterable
WARNING  inventory.services.user_service:user_service.py:127 Autenticacin fallida para usuario: admin
WARNING  inventory.system:logging_helper.py:190 AUTH_ATTEMPT: {"username": "admin", "success": false, "ip_address": null, "timestamp": "2025-07-04T08:28:22.678522"}
______ TestUserServiceOptimization.test_user_service_uses_fase3_pattern _______
tests\test_user_service_optimization.py:52: in test_user_service_uses_fase3_pattern
    self.assertIsInstance(self.user_service.db_helper, DatabaseHelper)
E   AssertionError: <helpers.database_helper.DatabaseHelper object at 0x000002361FF78B90> is not an instance of <class 'src.helpers.database_helper.DatabaseHelper'>
------------------------------ Captured log call ------------------------------
INFO     inventory.services.user_service:user_service.py:57 UserService inicializado con patrn FASE 3
____ TestLoginWindowWidgetLifecycle.test_successful_login_no_widget_error _____
tests\ui\auth\test_login_window_widget_lifecycle.py:53: in test_successful_login_no_widget_error
    login_window = LoginWindow(self.on_login_success_mock)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LoginWindow.__init__() takes 1 positional argument but 2 were given
____ TestLoginWindowWidgetLifecycle.test_widget_exists_before_modification ____
tests\ui\auth\test_login_window_widget_lifecycle.py:93: in test_widget_exists_before_modification
    login_window = LoginWindow(self.on_login_success_mock)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: LoginWindow.__init__() takes 1 positional argument but 2 were given
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.12.6-final-0 _______________

Name                                           Stmts   Miss  Cover
------------------------------------------------------------------
src\__init__.py                                    0      0   100%
src\api\__init__.py                                2      0   100%
src\api\main.py                                   20      4    80%
src\api\routes\__init__.py                         3      0   100%
src\api\routes\categories.py                     102     79    23%
src\api\routes\products.py                       141    114    19%
src\api\schemas\__init__.py                        4      0   100%
src\api\schemas\category_schemas.py               53      3    94%
src\api\schemas\product_schemas.py               166     22    87%
src\db\__init__.py                                 0      0   100%
src\db\database.py                                97     16    84%
src\hardware\__init__.py                           3      0   100%
src\hardware\barcode_reader.py                   177    146    18%
src\hardware\device_manager.py                   152    117    23%
src\helpers\__init__.py                            5      0   100%
src\helpers\database_helper.py                   108      4    96%
src\helpers\logging_helper.py                    115      2    98%
src\helpers\validation_helper.py                 152      3    98%
src\models\__init__.py                            10      0   100%
src\models\categoria.py                           62     18    71%
src\models\cliente.py                            104     66    37%
src\models\company_config.py                     158    116    27%
src\models\movimiento.py                         109     62    43%
src\models\producto.py                           103     64    38%
src\models\ticket.py                             132     93    30%
src\models\usuario.py                            142     97    32%
src\models\venta.py                              103     64    38%
src\reports\__init__.py                            6      0   100%
src\reports\pdf_generator.py                     194    166    14%
src\reports\ticket_generator.py                  196    156    20%
src\services\__init__.py                           9      0   100%
src\services\barcode_service.py                  194    133    31%
src\services\barcode_service_backup_fase1.py     187    187     0%
src\services\base_service.py                      17      8    53%
src\services\category_service.py                 102     64    37%
src\services\client_service.py                    69     17    75%
src\services\company_service.py                  185    152    18%
src\services\inventory_service.py                 59     50    15%
src\services\label_service.py                    293    252    14%
src\services\label_service_backup_fase1.py       293    293     0%
src\services\main.py                              64     64     0%
src\services\movement_service.py                 199    128    36%
src\services\product_service.py                  297    222    25%
src\services\report_service.py                   235    209    11%
src\services\report_service_backup_fase1.py      235    235     0%
src\services\sales_service.py                    101     83    18%
src\services\ticket_service.py                   204    178    13%
src\services\user_service.py                     244     84    66%
src\services\user_service_backup_fase1.py        126    126     0%
src\ui\__init__.py                                 1      0   100%
src\ui\auth\__init__.py                            3      0   100%
src\ui\auth\login_window.py                      104     40    62%
src\ui\auth\session_manager.py                    33     13    61%
src\ui\forms\__init__.py                           1      0   100%
src\ui\forms\barcode_config_form.py              465    465     0%
src\ui\forms\barcode_search_form.py              549    549     0%
src\ui\forms\category_form.py                    308    278    10%
src\ui\forms\client_form.py                      237    211    11%
src\ui\forms\company_config_form.py              285    252    12%
src\ui\forms\label_generator_form.py             498    498     0%
src\ui\forms\movement_form.py                    651    601     8%
src\ui\forms\product_form.py                     498    409    18%
src\ui\forms\reports_form.py                     404    353    13%
src\ui\forms\sales_form.py                       425    240    44%
src\ui\forms\ticket_preview_form.py              303    271    11%
src\ui\main\__init__.py                            2      0   100%
src\ui\main\main_window.py                       509    451    11%
src\ui\utils\__init__.py                           0      0   100%
src\ui\utils\window_manager.py                    73     54    26%
src\ui\widgets\__init__.py                         2      0   100%
src\ui\widgets\decimal_entry.py                  265    231    13%
src\utils\__init__.py                              2      0   100%
src\utils\barcode_utils.py                       247    202    18%
src\utils\database_helper.py                      48     34    29%
src\utils\hardware_detector.py                   327    176    46%
src\utils\logging_helper.py                      115     76    34%
src\utils\validation_helper.py                   152    129    15%
------------------------------------------------------------------
TOTAL                                          12239   9430    23%
Coverage HTML written to dir htmlcov
=========================== short test summary info ===========================
FAILED tests/api/test_product_schemas_service_validation.py::TestProductServiceStockValidation::test_product_create_strict_service_with_stock_should_fail
FAILED tests/api/test_product_schemas_service_validation.py::TestProductServiceStockValidation::test_product_response_service_consistency_warning
FAILED tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_authenticate_compatibility_maintained
FAILED tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_enhanced_password_validation
FAILED tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_error_handling_improved
FAILED tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_fase3_pattern_implementation
FAILED tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_get_user_by_id_optimized
FAILED tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_get_users_by_role_new_method
FAILED tests/optimization/test_user_service_optimization.py::TestUserServiceOptimization::test_security_validations_robust
FAILED tests/optimization/test_user_service_optimization.py::TestUserServiceSecurityEnhancements::test_authentication_logging
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_audit_trail_for_operations
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_backward_compatibility_maintained
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_cache_management_with_logging
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_create_product_label_with_logging
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_error_handling_with_structured_logging
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_format_barcode_uses_validation_helper
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_generate_barcode_image_with_validation
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_initialization_logging
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_performance_improvements
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_search_product_by_code_performance_logging
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_service_has_fase3_components
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_templates_functionality_preserved
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceFASE3Optimization::test_validate_barcode_uses_validation_helper
FAILED tests/services/test_label_service_fase3_optimization.py::TestLabelServiceIntegrationFASE3::test_full_workflow_with_fase3_components
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_auxiliary_methods_return_reportlab_compatible_elements
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_inventory_table_calculations
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_inventory_table_empty_data
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_inventory_table_with_zero_stock
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_movements_table_data_integrity
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_movements_table_empty_data
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_movements_table_structure
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_profitability_metrics_calculations
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_profitability_metrics_comprehensive
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_sales_summary_comprehensive
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_build_sales_summary_tax_breakdown
FAILED tests/services/test_report_service_auxiliary_methods.py::TestReportServiceAuxiliaryMethods::test_table_styling_consistency
FAILED tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_database_helper_complex_queries
FAILED tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_error_handling_with_logging
FAILED tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_inventory_report_generation
FAILED tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_movements_report_generation
FAILED tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_parameter_validation_with_validation_helper
FAILED tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_pdf_output_format_validation
FAILED tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_performance_logging
FAILED tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_profitability_report_generation
FAILED tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_report_service_initialization_fase3
FAILED tests/services/test_report_service_fase3.py::TestReportServiceFASE3::test_sales_report_with_tax_breakdown
FAILED tests/test_authentication_flow.py::TestAuthenticationFlow::test_correct_application_flow
FAILED tests/test_authentication_flow.py::TestAuthenticationFlow::test_login_window_authentication_failure
FAILED tests/test_authentication_flow.py::TestAuthenticationFlow::test_login_window_authentication_success
FAILED tests/test_authentication_flow.py::TestAuthenticationFlow::test_main_window_requires_authentication
FAILED tests/test_authentication_flow.py::TestAuthenticationFlow::test_main_window_works_with_authentication
FAILED tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_cache_integration
FAILED tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_error_handling_with_logging
FAILED tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_get_barcode_statistics_optimized
FAILED tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_init_uses_fase3_pattern
FAILED tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_read_barcode_with_logging
FAILED tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_search_product_by_code_uses_db_helper
FAILED tests/test_barcode_service_fase3_optimization.py::TestBarcodeServiceFase3Optimization::test_validate_barcode_uses_validation_helper
FAILED tests/test_barcode_service_fase3_optimization.py::TestLabelServiceFase3Optimization::test_create_product_label_with_db_helper
FAILED tests/test_barcode_service_fase3_optimization.py::TestLabelServiceFase3Optimization::test_generate_barcode_image_with_validation
FAILED tests/test_barcode_service_fase3_optimization.py::TestLabelServiceFase3Optimization::test_generate_labels_pdf_with_logging
FAILED tests/test_barcode_service_fase3_optimization.py::TestLabelServiceFase3Optimization::test_init_uses_fase3_pattern
FAILED tests/test_barcode_service_fase3_optimization.py::TestLabelServiceFase3Optimization::test_performance_metrics_tracking
FAILED tests/test_barcode_service_fase3_optimization.py::TestUSBHIDIntegration::test_auto_connect_first_device_optimized
FAILED tests/test_barcode_service_fase3_optimization.py::TestUSBHIDIntegration::test_detect_usb_readers_with_logging
FAILED tests/test_barcode_service_fase3_optimization.py::TestUSBHIDIntegration::test_read_with_timeout_and_validation
FAILED tests/test_barcode_service_fase3_optimization.py::TestBarcodeSystemIntegration::test_complete_workflow_scan_to_label
FAILED tests/test_barcode_service_fase3_optimization.py::TestBarcodeSystemIntegration::test_error_recovery_and_logging
FAILED tests/test_barcode_service_fase3_optimization.py::TestBarcodeSystemIntegration::test_performance_optimization_validation
FAILED tests/test_category_loading_diagnosis.py::TestCategoryLoadingDiagnosis::test_3_category_service_initialization
FAILED tests/test_category_loading_diagnosis.py::TestCategoryLoadingDiagnosis::test_5_simulate_form_loading
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_client_exists_by_name_case_insensitive
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_client_exists_by_name_false
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_client_exists_by_name_true
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_client_exists_by_ruc_false
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_client_exists_by_ruc_true
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_compatibility_with_existing_interface
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_duplicate_name_should_fail
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_duplicate_ruc_should_fail
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_empty_name_should_fail
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_invalid_ruc_should_fail
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_valid_data
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_whitespace_name_should_fail
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_create_client_without_ruc
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_data_cleaning_nombre
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_data_cleaning_ruc
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_database_connection_error_handling
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_all_clients_empty
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_all_clients_including_inactive
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_all_clients_only_active
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_all_clients_with_data
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_client_by_id_existing
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_get_client_by_id_nonexistent
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_return_types_unchanged
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_ruc_validation_boundary_values
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_ruc_validation_maximum_length
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_ruc_validation_minimum_length
FAILED tests/test_client_service_optimization.py::TestClientServiceOptimization::test_sql_injection_protection
FAILED tests/test_client_service_optimization.py::TestClientServiceWithMocks::test_create_client_with_mock_success
FAILED tests/test_client_service_optimization.py::TestClientServiceWithMocks::test_get_client_by_id_with_mock_found
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_backup_functionality
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_configuration_export
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_configuration_import
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_data_persistence
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_restore_functionality
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_company_service_logging
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_error_handling
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_generate_company_report
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_get_company_for_ticket_generation
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_get_company_info_success
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_service_initialization
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_update_company_info_success
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_update_company_partial_data
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_validate_company_data_invalid
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_validate_company_data_valid
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_validate_email_format
FAILED tests/test_company_service_basic.py::TestCompanyServiceBasic::test_validate_ruc_format
FAILED tests/test_company_service_basic.py::TestCompanyServiceIntegration::test_integration_with_database
FAILED tests/test_company_service_basic.py::TestCompanyServiceIntegration::test_integration_with_ticket_service
FAILED tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_backup_restore_functionality
FAILED tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_export_import_configuration
FAILED tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_get_company_for_ticket_generation
FAILED tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_get_company_info_success
FAILED tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_service_initialization
FAILED tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_update_company_info_success
FAILED tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_validate_company_data_invalid
FAILED tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_validate_company_data_valid
FAILED tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_validate_email_format
FAILED tests/test_company_service_basic_fixed.py::TestCompanyServiceBasic::test_validate_ruc_format
FAILED tests/test_critical_fixes.py::TestDatabaseConnectionCriticalFixes::test_database_connection_compatible_with_main
FAILED tests/test_critical_fixes.py::TestDatabaseConnectionCriticalFixes::test_database_connection_constructor_accepts_db_path
FAILED tests/test_critical_fixes.py::TestDatabaseConnectionCriticalFixes::test_database_connection_has_required_methods
FAILED tests/test_critical_fixes.py::TestMainWindowCriticalFixes::test_main_window_constructor_compatibility
FAILED tests/test_critical_fixes.py::TestSyntaxErrorFixes::test_main_window_compiles
FAILED tests/test_critical_fixes.py::TestSyntaxErrorFixes::test_product_form_compiles
FAILED tests/test_critical_fixes.py::TestIntegrationCriticalFixes::test_main_flow_integration
FAILED tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_main_py_initialization_pattern
FAILED tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_user_service_database_usage
FAILED tests/test_database_connection_evaluation.py::TestDatabaseConnectionPerformance::test_singleton_performance
FAILED tests/test_fase2_validation.py::TestDatabaseIntegration::test_database_initial_data
FAILED tests/test_fase2_validation.py::TestDatabaseIntegration::test_database_schema_creation
FAILED tests/test_fase2_validation.py::TestDatabaseIntegration::test_database_schema_integrity
FAILED tests/test_fase2_validation.py::TestDatabaseIntegration::test_database_version_control
FAILED tests/test_fase2_validation.py::TestProductServiceValidation::test_get_all_products
FAILED tests/test_fase2_validation.py::TestProductServiceValidation::test_product_creation_complete
FAILED tests/test_fase2_validation.py::TestProductServiceValidation::test_product_crud_operations
FAILED tests/test_fase2_validation.py::TestProductServiceValidation::test_product_validation_rules
FAILED tests/test_fase2_validation.py::TestCategoryServiceValidation::test_category_service_exists_and_functional
FAILED tests/test_fase2_validation.py::TestClientServiceValidation::test_client_service_basic_functionality
FAILED tests/test_fase2_validation.py::TestSalesServiceValidation::test_sales_service_functionality
FAILED tests/test_fase2_validation.py::TestReportServiceValidation::test_report_service_functionality
FAILED tests/test_fase2_validation.py::TestAuthenticationValidation::test_session_manager_exists
FAILED tests/test_fase2_validation.py::TestUserInterfaceValidation::test_main_window_functionality
FAILED tests/test_fase2_validation.py::TestSystemIntegrationFlow::test_complete_application_flow
FAILED tests/test_fase2_validation.py::TestSystemIntegrationFlow::test_product_creation_to_inventory_flow
FAILED tests/test_fase3_optimization.py::TestFase3QueryOptimization::test_avoid_count_star_in_existence_checks
FAILED tests/test_fase3_optimization.py::TestFase3QueryOptimization::test_category_existence_optimized
FAILED tests/test_fase3_optimization.py::TestFase3QueryOptimization::test_existence_check_uses_limit_1
FAILED tests/test_fase3_optimization.py::TestFase3CodeDeduplication::test_row_to_dict_centralized
FAILED tests/test_fase3_optimization.py::TestFase3CodeDeduplication::test_services_use_common_validation_helper
FAILED tests/test_fase3_optimization.py::TestFase3LoggingImprovement::test_logging_helper_provides_standard_logger
FAILED tests/test_fase3_optimization.py::TestFase3DocumentationUpdate::test_changelog_updated_for_phase3
FAILED tests/test_fase3_optimization.py::TestFase3DocumentationUpdate::test_inventory_directory_updated
FAILED tests/test_fase3_optimization.py::TestFase3IntegrationValidation::test_product_service_still_functional_after_optimization
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_connect_barcode_device_failure
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_connect_barcode_device_success
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_format_barcode
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_lookup_product_by_barcode_found
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_lookup_product_by_barcode_not_found
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_read_barcode_success
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_scan_barcode_devices
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_validate_barcode_invalid_codes
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeService::test_validate_barcode_valid_codes
FAILED tests/test_fase4_barcode_functionality.py::TestLabelService::test_create_product_label_basic
FAILED tests/test_fase4_barcode_functionality.py::TestLabelService::test_create_product_label_invalid_product
FAILED tests/test_fase4_barcode_functionality.py::TestLabelService::test_generate_barcode_image_invalid_code
FAILED tests/test_fase4_barcode_functionality.py::TestLabelService::test_generate_barcode_image_invalid_format
FAILED tests/test_fase4_barcode_functionality.py::TestLabelService::test_generate_barcode_image_success
FAILED tests/test_fase4_barcode_functionality.py::TestLabelService::test_get_available_templates
FAILED tests/test_fase4_barcode_functionality.py::TestLabelService::test_validate_template_data_invalid
FAILED tests/test_fase4_barcode_functionality.py::TestLabelService::test_validate_template_data_valid
FAILED tests/test_fase4_barcode_functionality.py::TestHardwareDetector::test_detect_usb_devices_no_usb
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeIntegration::test_barcode_to_label_workflow
FAILED tests/test_fase4_barcode_functionality.py::TestBarcodeIntegration::test_device_detection_and_configuration
FAILED tests/test_fase5_deployment.py::TestDeploymentInfrastructure::test_deployment_directory_structure
FAILED tests/test_fase5_deployment.py::TestDeploymentInfrastructure::test_deployment_scripts_exist
FAILED tests/test_fase5_deployment.py::TestDeploymentInfrastructure::test_installer_files_exist
FAILED tests/test_fase5_deployment.py::TestDocumentationComplete::test_technical_documentation_exists
FAILED tests/test_fase5_deployment.py::TestDocumentationComplete::test_training_materials_exist
FAILED tests/test_fase5_deployment.py::TestDocumentationComplete::test_user_manual_exists
FAILED tests/test_fase5_deployment.py::TestSystemReadyForProduction::test_database_initialization
FAILED tests/test_fase5_deployment.py::TestDeploymentAssets::test_readme_exists
FAILED tests/test_helpers_validation.py::TestValidationHelper::test_validate_decimal_range_invalid
FAILED tests/test_helpers_validation.py::TestValidationHelper::test_validate_list_items_invalid
FAILED tests/test_helpers_validation.py::TestValidationHelper::test_validate_positive_integer_invalid
FAILED tests/test_helpers_validation.py::TestValidationHelper::test_validate_username_invalid_cases
FAILED tests/test_helpers_validation.py::TestDatabaseHelper::test_row_to_dict_with_sqlite_row
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_get_log_statistics
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_get_service_logger
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_get_service_logger_cached
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_get_system_logger
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_get_ui_logger
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_log_authentication_attempt_failure
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_log_authentication_attempt_success
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_log_business_rule_violation
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_log_database_operation
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_log_error_with_context
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_log_performance_metrics_fast
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_log_performance_metrics_slow
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_log_user_action
FAILED tests/test_helpers_validation.py::TestLoggingHelper::test_setup_logging_basic
FAILED tests/test_helpers_validation.py::TestHelpersIntegration::test_logging_with_validation_errors
FAILED tests/test_models_validation.py::TestModelsValidation::test_categoria_nombre_constraints
FAILED tests/test_models_validation.py::TestModelsValidation::test_cliente_email_validation
FAILED tests/test_models_validation.py::TestModelsValidation::test_cliente_ruc_validation
FAILED tests/test_models_validation.py::TestModelsValidation::test_cliente_valid_creation
FAILED tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_fase3_helpers_initialization
FAILED tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_get_movement_statistics
FAILED tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_logging_helper_integration
FAILED tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_movement_creation_optimized_flow
FAILED tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_new_optimized_methods
FAILED tests/test_movement_service_optimization.py::TestMovementServiceOptimization::test_validate_movement_data_optimized
FAILED tests/test_product_form_connection.py::TestProductFormConnection::test_category_service_receives_db_connection
FAILED tests/test_product_form_connection.py::TestProductFormConnection::test_category_service_with_proper_connection
FAILED tests/test_product_form_connection.py::TestProductFormConnection::test_database_connection_error_handling
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_all_crud_operations_working
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_backward_compatibility_fase1_fase3
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_bulk_operations_performance_fase3
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_business_rules_preserved
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_create_product_performance_fase3
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_database_helper_implementation
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_database_operations_with_db_helper
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_integration_with_optimized_services
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_logging_helper_implementation
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_logging_with_logging_helper
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_search_products_performance_fase3
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_validation_helper_implementation
FAILED tests/test_product_service_fase3_optimization.py::TestProductServiceFase3Optimization::test_validations_with_validation_helper
FAILED tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_get_product_by_id_returns_producto_object
FAILED tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_get_product_by_id_with_none_values
FAILED tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_method_signature_unchanged
FAILED tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_object_has_all_required_attributes
FAILED tests/test_product_service_object_return.py::TestProductServiceObjectReturn::test_sales_form_compatibility
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_date_fields_exist
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_date_validation
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_error_handling
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_export_to_excel_functionality
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_filter_options
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_form_has_required_tabs
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_form_initialization
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_form_keyboard_shortcuts
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_form_responsive_design
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_generate_inventory_report_failure
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_generate_inventory_report_success
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_generate_movements_report_success
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_generate_sales_report_success
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_progress_bar_functionality
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_report_history_functionality
FAILED tests/test_reports_form_basic.py::TestReportsFormBasic::test_report_preview_functionality
FAILED tests/test_reports_form_basic.py::TestReportsFormIntegration::test_integration_with_report_service
FAILED tests/test_reports_form_basic.py::TestReportsFormIntegration::test_real_report_generation
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_concurrent_report_generation
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_error_handling_invalid_dates
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_error_handling_pdf_generation
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_generate_pdf_report_function
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_inventory_report_generation
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_logging_integration
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_memory_usage_cleanup
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_movements_report_generation
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_inventory
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_movements
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_profitability
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_sales
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_performance_large_dataset
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_profitability_report_generation
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_report_service_export_to_pdf_integration
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_report_service_optimization_pattern
FAILED tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_sales_report_generation
FAILED tests/test_sales_form_correction.py::TestSalesFormCorrection::test_sales_window_initialization_pattern_corrected
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_add_product_to_sale_compatibility
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_category_type_optimization
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_centralized_validation
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_client_exists_optimization
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_create_sale_compatibility
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_error_handling_with_helpers
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_get_all_sales_new_method
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_get_sale_by_id_compatibility
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_get_sales_by_date_range_new_method
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_get_sales_statistics_new_method
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_helpers_initialization
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_maintains_original_interface
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_mock_compatibility
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_optimized_database_operations
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_performance_improvement
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_product_exists_optimization
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_sales_service_initialization_compatibility
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_standardized_logging
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_validate_sale_data_new_method
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimization::test_validation_rules_compatibility
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimizationIntegration::test_complete_sale_flow_optimized
FAILED tests/test_sales_service_optimization.py::TestSalesServiceOptimizationIntegration::test_performance_comparison_with_original
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_actualizar_pdf_path_success
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_eliminar_ticket_no_existe
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_eliminar_ticket_success
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_error_handling_database
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_generar_ticket_entrada_movimiento_inexistente
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_generar_ticket_entrada_movimiento_venta
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_generar_ticket_venta_duplicado
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_generar_ticket_venta_venta_inexistente
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_estadisticas_tickets_success
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_ticket_por_id_success
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_tickets_por_fecha_success
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_tickets_por_movimiento_success
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_tickets_por_venta_success
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_tickets_sin_pdf_success
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_ultimo_ticket_por_tipo_invalido
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_obtener_ultimo_ticket_por_tipo_success
FAILED tests/test_ticket_service_basic.py::TestTicketServiceBasic::test_reimprimir_ticket_success
FAILED tests/test_user_service_optimization.py::TestUserServiceOptimization::test_authenticate_maintains_compatibility
FAILED tests/test_user_service_optimization.py::TestUserServiceOptimization::test_create_user_with_strong_password
FAILED tests/test_user_service_optimization.py::TestUserServiceOptimization::test_error_handling_improvement
FAILED tests/test_user_service_optimization.py::TestUserServiceOptimization::test_get_user_statistics
FAILED tests/test_user_service_optimization.py::TestUserServiceOptimization::test_get_users_by_role
FAILED tests/test_user_service_optimization.py::TestUserServiceOptimization::test_logging_helper_usage
FAILED tests/test_user_service_optimization.py::TestUserServiceOptimization::test_user_service_uses_fase3_pattern
FAILED tests/ui/auth/test_login_window_widget_lifecycle.py::TestLoginWindowWidgetLifecycle::test_successful_login_no_widget_error
FAILED tests/ui/auth/test_login_window_widget_lifecycle.py::TestLoginWindowWidgetLifecycle::test_widget_exists_before_modification
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_cancel_edit_functionality
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_category_selection
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_category_window_initialization
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_create_category_integration
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_delete_category_integration
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_error_handling_invalid_data
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_filter_by_type
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_form_validation
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_initial_button_states
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_load_categories_success
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_new_category_mode
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_search_functionality
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_ui_elements_created
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_update_category_integration
ERROR tests/test_category_form_basic.py::TestCategoryFormBasic::test_window_close_protocol
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_cancel_edit_functionality
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_client_selection
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_client_window_initialization
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_create_client_integration
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_create_client_without_ruc
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_deactivate_client_integration
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_display_client_with_ruc
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_display_client_without_ruc
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_edit_client_mode
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_error_handling_empty_name
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_form_validation_name_required
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_form_validation_ruc_optional
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_initial_button_states
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_initial_form_states
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_load_clients_success
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_new_client_mode
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_no_selection_edit_warning
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_search_functionality
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_ui_elements_created
ERROR tests/test_client_form_basic.py::TestClientFormBasic::test_update_client_integration
ERROR tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_compatibility_with_existing_tests
ERROR tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_critical_system_functionality
ERROR tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_database_helper_functionality
ERROR tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_logging_helper_functionality
ERROR tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_new_optimized_methods
ERROR tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_optimized_services_initialization
ERROR tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_optimized_services_performance
ERROR tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_system_error_handling
ERROR tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_user_service_analysis
ERROR tests/test_complete_system_validation.py::TestCompleteSystemValidation::test_validation_helper_functionality
ERROR tests/test_database_connection_evaluation.py::TestDatabaseConnectionEvaluation::test_user_service_database_usage
ERROR tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_all_services_comprehensive_coverage
ERROR tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_authentication_security
ERROR tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_barcode_functionality_basic
ERROR tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_barcode_services_availability
ERROR tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_complete_business_workflow_integration
ERROR tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_concurrent_operations_performance
ERROR tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_core_methods_functionality_coverage
ERROR tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_error_recovery_integration
ERROR tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_input_validation_security
ERROR tests/test_fase5a_coverage_analysis.py::TestFase5ACoverageAnalysis::test_performance_benchmarks_critical_operations
ERROR tests/test_fase5a_performance.py::TestFase5APerformance::test_bulk_operations_performance
ERROR tests/test_fase5a_performance.py::TestFase5APerformance::test_complex_business_scenario_performance
ERROR tests/test_fase5a_performance.py::TestFase5APerformance::test_concurrent_operations_performance
ERROR tests/test_fase5a_performance.py::TestFase5APerformance::test_crud_operations_performance
ERROR tests/test_fase5a_performance.py::TestFase5APerformance::test_database_performance
ERROR tests/test_fase5a_performance.py::TestFase5APerformance::test_memory_usage_monitoring
ERROR tests/test_fase5a_performance.py::TestFase5APerformance::test_service_creation_performance
ERROR tests/test_fase5a_security.py::TestFase5ASecurity::test_authentication_security_robustness
ERROR tests/test_fase5a_security.py::TestFase5ASecurity::test_business_data_validation
ERROR tests/test_fase5a_security.py::TestFase5ASecurity::test_comprehensive_input_validation
ERROR tests/test_fase5a_security.py::TestFase5ASecurity::test_role_based_authorization
ERROR tests/test_fase5a_security.py::TestFase5ASecurity::test_sql_injection_protection
ERROR tests/test_fase5a_security.py::TestFase5ASecurity::test_system_integrity_after_attacks
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_abc_analysis
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_category_statistics
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_current_inventory
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_by_category
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_movements
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_statistics
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_turnover_report
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_value
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_inventory_value_by_category
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_low_stock_products
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_movements_by_date_range
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_out_of_stock_products
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_get_product_movement_history
ERROR tests/test_inventory_service_basic.py::TestInventoryServiceBasic::test_validate_stock_availability
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_activate_product
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_create_product_invalid_category
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_create_product_invalid_name
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_create_product_minimal_data
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_create_product_negative_values
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_create_product_success
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_deactivate_product
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_get_all_products
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_get_low_stock_products
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_get_product_by_id_not_found
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_get_product_by_id_success
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_get_products_by_category
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_search_products_by_name
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_product_invalid_data
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_product_not_found
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_product_success
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_stock_add
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_stock_insufficient
ERROR tests/test_product_service_basic_crud.py::TestProductServiceBasicCRUD::test_update_stock_subtract
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_concurrent_report_generation
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_error_handling_invalid_dates
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_error_handling_pdf_generation
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_generate_pdf_report_function
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_inventory_report_generation
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_logging_integration
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_memory_usage_cleanup
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_movements_report_generation
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_inventory
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_movements
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_profitability
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_pdf_generation_sales
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_performance_large_dataset
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_profitability_report_generation
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_report_service_export_to_pdf_integration
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_report_service_optimization_pattern
ERROR tests/test_reports_system_optimization.py::TestReportsSystemOptimization::test_sales_report_generation
ERROR tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_material_can_have_nonzero_stock
ERROR tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_producto_service_enforces_stock_restriction
ERROR tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_servicio_creation_with_nonzero_stock_rejected
ERROR tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_servicio_modelo_validates_zero_stock
ERROR tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_servicio_stock_zero_on_creation
ERROR tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_update_material_stock_allowed
ERROR tests/unit/test_service_stock_restriction.py::TestServiceStockRestriction::test_update_servicio_stock_to_nonzero_rejected
=========== 327 failed, 194 passed, 2 skipped, 126 errors in 31.18s ===========
